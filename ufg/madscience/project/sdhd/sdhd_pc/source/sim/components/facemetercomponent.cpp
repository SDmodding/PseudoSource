// File Line: 51
// RVA: 0x1544680
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_Events__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("Events", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_Events, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_Events__);
}

// File Line: 52
// RVA: 0x15446C0
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_FaceAdjustment__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("FaceAdjustment", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_FaceAdjustment, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_FaceAdjustment__);
}

// File Line: 53
// RVA: 0x1544600
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_CopPoints__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("CopPoints", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_CopPoints, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_CopPoints__);
}

// File Line: 54
// RVA: 0x1544840
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_TriadPoints__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("TriadPoints", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_TriadPoints, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_TriadPoints__);
}

// File Line: 55
// RVA: 0x1544880
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_XPFlasherCaption__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("XPFlasherCaption", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_XPFlasherCaption, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_XPFlasherCaption__);
}

// File Line: 56
// RVA: 0x1544780
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_MultiplierReduction__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("MultiplierReduction", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_MultiplierReduction, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_MultiplierReduction__);
}

// File Line: 57
// RVA: 0x15447C0
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_MultiplierResetTimer__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("MultiplierResetTimer", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_MultiplierResetTimer, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_MultiplierResetTimer__);
}

// File Line: 58
// RVA: 0x1544800
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_MultiplierSlowMode__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("MultiplierSlowMode", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_MultiplierSlowMode, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_MultiplierSlowMode__);
}

// File Line: 59
// RVA: 0x1544740
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_MeterCooldownStartsAfter__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("MeterCooldownStartsAfter", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_MeterCooldownStartsAfter, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_MeterCooldownStartsAfter__);
}

// File Line: 60
// RVA: 0x1544700
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_MeterCooldownRatePerSecond__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("MeterCooldownDrainRatePerSecond", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_MeterCooldownRatePerSecond, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_MeterCooldownRatePerSecond__);
}

// File Line: 61
// RVA: 0x1544580
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_ActivatedMeterCooldownRatePerSecond__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("ActivatedMeterCooldownDrainRatePerSecond", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_ActivatedMeterCooldownRatePerSecond, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_ActivatedMeterCooldownRatePerSecond__);
}

// File Line: 62
// RVA: 0x1544640
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_Disabled__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("Disabled", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_Disabled, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_Disabled__);
}

// File Line: 63
// RVA: 0x15445C0
__int64 UFG::_dynamic_initializer_for__FaceEventSymbol_AdjustmentType__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("AdjustmentType", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&FaceEventSymbol_AdjustmentType, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__FaceEventSymbol_AdjustmentType__);
}

// File Line: 67
// RVA: 0x549BF0
void __fastcall UFG::ScoreAffector::Reset(UFG::ScoreAffector *this)
{
  this->mIsActive = 0;
  this->mCurrentMultiplier = 1.0;
}

// File Line: 73
// RVA: 0x556DC0
float __fastcall UFG::ScoreAffector::Trigger(UFG::ScoreAffector *this)
{
  float v1; // xmm3_4
  float v2; // xmm0_4
  float v3; // xmm2_4
  float v4; // xmm0_4
  float v5; // xmm1_4
  float result; // xmm0_4

  v1 = this->mCurrentMultiplier;
  this->mIsActive = 1;
  this->mTimestamp = UFG::Metrics::msInstance.mSimTimeMSec;
  v2 = v1 - this->mMultiplierReduction;
  if ( v2 <= 0.0 )
  {
    v2 = 0.0;
    goto LABEL_5;
  }
  v3 = FLOAT_2_0;
  if ( v2 < 2.0 )
LABEL_5:
    v3 = v2;
  v4 = this->mMultiplierResetTimer;
  this->mCurrentMultiplier = v3;
  if ( v4 <= 0.0 )
  {
    this->mMultiplierReplenishRate = 1.0;
    result = v1;
  }
  else
  {
    v5 = (float)(1.0 - v3) / v4;
    result = v1;
    this->mMultiplierReplenishRate = v5;
  }
  return result;
}

// File Line: 93
// RVA: 0x55C510
float __fastcall UFG::ScoreAffector::Update(UFG::ScoreAffector *this, float deltaTime)
{
  float v2; // xmm0_4
  float result; // xmm0_4
  float v4; // xmm3_4
  float v5; // xmm1_4
  float v6; // xmm2_4

  v2 = (float)(LODWORD(UFG::Metrics::msInstance.mSimTimeMSec) - LODWORD(this->mTimestamp));
  if ( (signed __int64)(UFG::Metrics::msInstance.mSimTimeMSec - this->mTimestamp) < 0 )
    v2 = v2 + 1.8446744e19;
  result = v2 * 0.001;
  if ( !this->mIsActive )
  {
    result = *(float *)&FLOAT_1_0;
    this->mCurrentMultiplier = 1.0;
    return result;
  }
  v4 = this->mMultiplierResetTimer;
  if ( result >= v4 )
  {
    this->mCurrentMultiplier = 1.0;
    goto LABEL_12;
  }
  v5 = (float)(deltaTime * this->mMultiplierReplenishRate) + this->mCurrentMultiplier;
  if ( v5 <= 0.0 )
  {
    v5 = 0.0;
  }
  else
  {
    v6 = FLOAT_2_0;
    if ( v5 >= 2.0 )
      goto LABEL_11;
  }
  v6 = v5;
LABEL_11:
  this->mCurrentMultiplier = v6;
LABEL_12:
  if ( result >= v4 )
    this->mIsActive = 0;
  return result;
}

// File Line: 138
// RVA: 0x1543E40
__int64 dynamic_initializer_for__UFG::FaceMeterComponent::s_FaceMeterComponentList__()
{
  return atexit(dynamic_atexit_destructor_for__UFG::FaceMeterComponent::s_FaceMeterComponentList__);
}

// File Line: 139
// RVA: 0x5326B0
signed __int64 __fastcall UFG::FaceMeterComponent::GetTypeSize(UFG::FaceMeterComponent *this)
{
  return 8672i64;
}

// File Line: 147
// RVA: 0x5171C0
void __fastcall UFG::FaceMeterComponent::FaceMeterComponent(UFG::FaceMeterComponent *this, unsigned int name_uid)
{
  UFG::FaceMeterComponent *v2; // rsi
  UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *v3; // rbx
  signed __int64 v4; // rdi
  UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *v5; // rax
  signed __int64 v6; // rax

  v2 = this;
  UFG::SimComponent::SimComponent((UFG::SimComponent *)&this->vfptr, name_uid);
  v3 = (UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *)&v2->mPrev;
  v3->mPrev = v3;
  v3->mNext = v3;
  v2->vfptr = (UFG::qSafePointerNode<UFG::SimComponent>Vtbl *)&UFG::FaceMeterComponent::`vftable';
  v4 = 107i64;
  `eh vector constructor iterator'(
    v2->mAffectors,
    0x50ui64,
    107,
    (void (__fastcall *)(void *))UFG::ScoreAffector::ScoreAffector);
  v2->mLastActionPerformedTimestamp = 0i64;
  *(_WORD *)&v2->mFaceMeterEnabled = 1;
  UFG::PropertySetHandle::PropertySetHandle(&v2->mProperties);
  v5 = UFG::FaceMeterComponent::s_FaceMeterComponentList.mNode.mPrev;
  UFG::FaceMeterComponent::s_FaceMeterComponentList.mNode.mPrev->mNext = (UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *)&v2->mPrev;
  v3->mPrev = v5;
  v2->mNext = (UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *)&UFG::FaceMeterComponent::s_FaceMeterComponentList;
  UFG::FaceMeterComponent::s_FaceMeterComponentList.mNode.mPrev = (UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *)&v2->mPrev;
  UFG::SimComponent::AddType(
    (UFG::SimComponent *)&v2->vfptr,
    UFG::FaceMeterComponent::_FaceMeterComponentTypeUID,
    "FaceMeterComponent");
  v6 = (signed __int64)&v2->mAffectors[0].mCurrentMultiplier;
  do
  {
    *(_BYTE *)(v6 + 28) = 0;
    *(_DWORD *)v6 = 1065353216;
    v6 += 80i64;
    --v4;
  }
  while ( v4 );
}

// File Line: 161
// RVA: 0x51B670
void __fastcall UFG::FaceMeterComponent::~FaceMeterComponent(UFG::FaceMeterComponent *this)
{
  UFG::FaceMeterComponent *v1; // rdi
  UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *v2; // rbx
  UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *v3; // rcx
  UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *v4; // rax
  UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *v5; // rcx
  UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *v6; // rax

  v1 = this;
  this->vfptr = (UFG::qSafePointerNode<UFG::SimComponent>Vtbl *)&UFG::FaceMeterComponent::`vftable';
  if ( this == UFG::FaceMeterComponent::s_FaceMeterComponentpCurrentIterator )
    UFG::FaceMeterComponent::s_FaceMeterComponentpCurrentIterator = (UFG::FaceMeterComponent *)&this->mPrev[-4];
  v2 = (UFG::qNode<UFG::FaceMeterComponent,UFG::FaceMeterComponent> *)&this->mPrev;
  v3 = this->mPrev;
  v4 = v2->mNext;
  v3->mNext = v4;
  v4->mPrev = v3;
  v2->mPrev = v2;
  v2->mNext = v2;
  UFG::PropertySetHandle::~PropertySetHandle(&v1->mProperties);
  `eh vector destructor iterator'(
    v1->mAffectors,
    0x50ui64,
    107,
    (void (__fastcall *)(void *))UFG::ScoreAffector::~ScoreAffector);
  v5 = v2->mPrev;
  v6 = v2->mNext;
  v5->mNext = v6;
  v6->mPrev = v5;
  v2->mPrev = v2;
  v2->mNext = v2;
  UFG::SimComponent::~SimComponent((UFG::SimComponent *)&v1->vfptr);
}

// File Line: 167
// RVA: 0x1549A00
__int64 UFG::_dynamic_initializer_for__gsymDefaultFacesystemEvents__()
{
  unsigned int v0; // eax

  v0 = UFG::qStringHash32("default-facesystem-events", 0xFFFFFFFF);
  UFG::qSymbol::qSymbol((UFG::qWiseSymbol *)&UFG::gsymDefaultFacesystemEvents, v0);
  return atexit(UFG::_dynamic_atexit_destructor_for__gsymDefaultFacesystemEvents__);
}

// File Line: 170
// RVA: 0x53DD50
void __fastcall UFG::FaceMeterComponent::OnAttach(UFG::FaceMeterComponent *this, UFG::SimObject *pObject)
{
  UFG::FaceMeterComponent *v2; // rbx
  UFG::qPropertySet *v3; // rax
  hkSeekableStreamReader *v4; // [rsp+30h] [rbp-18h]
  void (__fastcall *v5)(UFG::FaceMeterComponent *, UFG::Event *); // [rsp+38h] [rbp-10h]

  v2 = this;
  v3 = UFG::PropertySetManager::GetPropertySet((UFG::qSymbol *)&UFG::gsymDefaultFacesystemEvents.mUID);
  UFG::PropertySetHandle::SetPropSet(&v2->mProperties, v3);
  v4 = Assembly::GetRCX(v2);
  v5 = UFG::FaceMeterComponent::HandleGameStatEvent;
  UFG::EventDispatcher::Register(
    &UFG::EventDispatcher::mInstance,
    (fastdelegate::FastDelegate1<UFG::Event *,void> *)&v4,
    UFG::gGameStatEventChannel.mUID,
    UFG::gGameStatEventChannel.mName,
    0);
}

// File Line: 177
// RVA: 0x540420
void __fastcall UFG::FaceMeterComponent::OnDetach(UFG::FaceMeterComponent *this)
{
  UFG::FaceMeterComponent *v1; // rbx
  hkSeekableStreamReader *v2; // [rsp+20h] [rbp-18h]
  void (__fastcall *v3)(UFG::FaceMeterComponent *, UFG::Event *); // [rsp+28h] [rbp-10h]

  v1 = this;
  UFG::PropertySetHandle::Null(&this->mProperties);
  v3 = UFG::FaceMeterComponent::HandleGameStatEvent;
  v2 = Assembly::GetRCX(v1);
  UFG::EventDispatcher::UnRegister(
    &UFG::EventDispatcher::mInstance,
    (fastdelegate::FastDelegate1<UFG::Event *,void> *)&v2,
    UFG::gGameStatEventChannel.mUID);
}

// File Line: 189
// RVA: 0x563BA0
void __fastcall UFG::FaceMeterComponent::_HandleInVehicleReplenish(UFG::FaceMeterComponent *this, float deltaTime)
{
  UFG::SimObject *v2; // rcx
  unsigned __int16 v3; // dx
  UFG::SimComponent *v4; // rax
  unsigned int v5; // er8
  unsigned int v6; // er9
  signed __int64 v7; // rdx
  unsigned int v8; // er8
  unsigned int v9; // er9
  unsigned int v10; // er8
  unsigned int v11; // er9
  UFG::qNode<UFG::RebindingComponentHandleBase,UFG::RebindingComponentHandleBase> *v12; // rcx
  UFG::qNode<UFG::RebindingComponentHandleBase,UFG::RebindingComponentHandleBase> *v13; // rax
  UFG::qNode<UFG::RebindingComponentHandleBase,UFG::RebindingComponentHandleBase> *v14; // rdx
  UFG::qNode<UFG::RebindingComponentHandleBase,UFG::RebindingComponentHandleBase> *v15; // rbx
  UFG::PhysicsMoverInterface *v16; // rcx

  v2 = this->m_pSimObject;
  if ( !v2 )
    return;
  v3 = v2->m_Flags;
  if ( !((v3 >> 14) & 1) )
  {
    if ( (v3 & 0x8000u) == 0 )
    {
      if ( (v3 >> 13) & 1 )
      {
        v8 = (unsigned int)v2[1].vfptr;
        v9 = v2->m_Components.size;
        if ( v8 < v9 )
        {
          v7 = (signed __int64)&v2->m_Components.p[v8];
          while ( (*(_DWORD *)(v7 + 8) & 0xFE000000) != (UFG::CharacterOccupantComponent::_TypeUID & 0xFE000000)
               || UFG::CharacterOccupantComponent::_TypeUID & ~*(_DWORD *)(v7 + 8) & 0x1FFFFFF )
          {
            ++v8;
            v7 += 16i64;
            if ( v8 >= v9 )
            {
              v4 = 0i64;
              goto LABEL_27;
            }
          }
          goto LABEL_11;
        }
      }
      else
      {
        if ( !((v3 >> 12) & 1) )
        {
          v4 = UFG::SimObject::GetComponentOfType(v2, UFG::CharacterOccupantComponent::_TypeUID);
          goto LABEL_27;
        }
        v10 = (unsigned int)v2[1].vfptr;
        v11 = v2->m_Components.size;
        if ( v10 < v11 )
        {
          v7 = (signed __int64)&v2->m_Components.p[v10];
          while ( (*(_DWORD *)(v7 + 8) & 0xFE000000) != (UFG::CharacterOccupantComponent::_TypeUID & 0xFE000000)
               || UFG::CharacterOccupantComponent::_TypeUID & ~*(_DWORD *)(v7 + 8) & 0x1FFFFFF )
          {
            ++v10;
            v7 += 16i64;
            if ( v10 >= v11 )
            {
              v4 = 0i64;
              goto LABEL_27;
            }
          }
          goto LABEL_11;
        }
      }
    }
    else
    {
      v5 = (unsigned int)v2[1].vfptr;
      v6 = v2->m_Components.size;
      if ( v5 < v6 )
      {
        v7 = (signed __int64)&v2->m_Components.p[v5];
        while ( (*(_DWORD *)(v7 + 8) & 0xFE000000) != (UFG::CharacterOccupantComponent::_TypeUID & 0xFE000000)
             || UFG::CharacterOccupantComponent::_TypeUID & ~*(_DWORD *)(v7 + 8) & 0x1FFFFFF )
        {
          ++v5;
          v7 += 16i64;
          if ( v5 >= v6 )
            goto LABEL_10;
        }
LABEL_11:
        v4 = *(UFG::SimComponent **)v7;
        goto LABEL_27;
      }
    }
LABEL_10:
    v4 = 0i64;
    goto LABEL_27;
  }
  v4 = v2->m_Components.p[44].m_pComponent;
LABEL_27:
  if ( v4 )
  {
    v12 = v4[1].m_BoundComponentHandles.mNode.mPrev;
    if ( v12 )
    {
      v13 = v12[2].mNext;
      if ( v13 )
      {
        v14 = v13[6].mNext;
        v15 = v14[3].mPrev;
        if ( v15 )
        {
          if ( !((UFG::SimObjectVehiclePropertiesComponent::_TypeUID ^ LODWORD(v15[1].mNext)) & 0xFE000000)
            && !(UFG::SimObjectVehiclePropertiesComponent::_TypeUID & ~LODWORD(v15[1].mNext) & 0x1FFFFFF) )
          {
            v16 = (UFG::PhysicsMoverInterface *)v14[34].mPrev;
            if ( v16 )
            {
              if ( UFG::PhysicsMoverInterface::GetEngineDamage(v16) < 0.5 )
                UFG::GameStatAction::Player::ClampAndApplyDeltaCombatMeter(
                  (float)(deltaTime * 0.0) * *(float *)&v15[12].mNext,
                  0);
            }
          }
        }
      }
    }
  }
}

// File Line: 215
// RVA: 0x54C900
void __fastcall UFG::FaceMeterComponent::SetFaceMeterActivated(UFG::FaceMeterComponent *this, const bool bFaceMeterActivated)
{
  UFG::qWiseSymbol result; // [rsp+58h] [rbp+10h]

  this->mFaceMeterActivated = bFaceMeterActivated;
  UFG::qWiseSymbol::create_from_string(&result, "play_face_meter_enter");
  if ( UFG::HudAudio::m_instance )
    UFG::AudioEntity::CreateAndPlayEvent(
      (UFG::AudioEntity *)&UFG::HudAudio::m_instance->vfptr,
      result.mUID,
      0i64,
      0,
      0i64);
  _((AMD_HD3D *)result.mUID);
}

// File Line: 222
// RVA: 0x55B1A0
void __fastcall UFG::FaceMeterComponent::Update(UFG::FaceMeterComponent *this, float deltaTime)
{
  UFG::FaceMeterComponent *v2; // rdi
  UFG::ScoreAffector *v3; // rbx
  signed __int64 v4; // rsi
  float *v5; // rax
  UFG::GameStatTracker *v6; // rax
  signed __int64 v7; // rax
  float v8; // xmm0_4
  float v9; // xmm6_4
  __int128 v10; // xmm7
  UFG::GameStatTracker *v11; // rax
  float v12; // xmm6_4
  UFG::qWiseSymbol result; // [rsp+80h] [rbp+8h]

  v2 = this;
  if ( this->mFaceMeterEnabled && NISManager::GetInstance()->mState == STATE_INVALID )
  {
    UFG::FaceMeterComponent::_HandleInVehicleReplenish(v2, deltaTime);
    v3 = v2->mAffectors;
    v4 = 107i64;
    do
    {
      UFG::ScoreAffector::Update(v3, deltaTime);
      ++v3;
      --v4;
    }
    while ( v4 );
    if ( v2->mFaceMeterActivated )
    {
      UFG::PropertySetHandle::Bind(&v2->mProperties);
      v5 = UFG::qPropertySet::Get<float>(
             v2->mProperties.mpPropSet,
             (UFG::qSymbol *)&FaceEventSymbol_ActivatedMeterCooldownRatePerSecond.mUID,
             DEPTH_RECURSE);
      UFG::GameStatAction::Player::ClampAndApplyDeltaCombatMeter(
        COERCE_FLOAT(COERCE_UNSIGNED_INT(*v5 * deltaTime) ^ _xmm[0]),
        0);
      v6 = UFG::GameStatTracker::Instance();
      if ( UFG::GameStatTracker::GetStat(v6, Face) <= 0.0 )
      {
        v2->mFaceMeterActivated = 0;
        UFG::qWiseSymbol::create_from_string(&result, "play_face_meter_exit");
        if ( UFG::HudAudio::m_instance )
          UFG::AudioEntity::CreateAndPlayEvent(
            (UFG::AudioEntity *)&UFG::HudAudio::m_instance->vfptr,
            result.mUID,
            0i64,
            0,
            0i64);
        _((AMD_HD3D *)result.mUID);
      }
    }
    else
    {
      v7 = v2->mLastActionPerformedTimestamp;
      if ( v7 )
      {
        v8 = (float)(signed int)v7;
        if ( v7 < 0 )
          v8 = v8 + 1.8446744e19;
        v9 = UFG::Metrics::msInstance.mSimTime_Temp - v8;
        UFG::PropertySetHandle::Bind(&v2->mProperties);
        if ( v9 > *UFG::qPropertySet::Get<float>(
                     v2->mProperties.mpPropSet,
                     (UFG::qSymbol *)&FaceEventSymbol_MeterCooldownStartsAfter.mUID,
                     DEPTH_RECURSE) )
        {
          UFG::PropertySetHandle::Bind(&v2->mProperties);
          v10 = *(unsigned int *)UFG::qPropertySet::Get<float>(
                                   v2->mProperties.mpPropSet,
                                   (UFG::qSymbol *)&FaceEventSymbol_MeterCooldownRatePerSecond.mUID,
                                   DEPTH_RECURSE);
          v11 = UFG::GameStatTracker::Instance();
          v12 = UFG::GameStatTracker::GetStat(v11, Face);
          *(float *)&v10 = *(float *)&v10 * deltaTime;
          UFG::GameStatAction::Player::ClampAndApplyDeltaCombatMeter(COERCE_FLOAT(v10 ^ _xmm[0]), 0);
          if ( v12 <= *(float *)&v10 )
            v2->mLastActionPerformedTimestamp = 0i64;
        }
      }
    }
  }
}

// File Line: 333
// RVA: 0x549660
void __fastcall UFG::FaceMeterComponent::Reset(UFG::FaceMeterComponent *this)
{
  UFG::FaceMeterComponent *v1; // rbx
  char *v2; // rax
  signed __int64 v3; // rdx
  UFG::qWiseSymbol result; // [rsp+50h] [rbp+8h]

  v1 = this;
  v2 = (char *)&this->mAffectors[0].mCurrentMultiplier;
  v3 = 107i64;
  do
  {
    v2[28] = 0;
    *(_DWORD *)v2 = 1065353216;
    v2 += 80;
    --v3;
  }
  while ( v3 );
  this->mLastActionPerformedTimestamp = 0i64;
  this->mFaceMeterActivated = 0;
  UFG::qWiseSymbol::create_from_string(&result, "play_face_meter_exit");
  if ( UFG::HudAudio::m_instance )
    UFG::AudioEntity::CreateAndPlayEvent(
      (UFG::AudioEntity *)&UFG::HudAudio::m_instance->vfptr,
      result.mUID,
      0i64,
      0,
      0i64);
  v1->mFaceMeterEnabled = 1;
  _((AMD_HD3D *)result.mUID);
}

// File Line: 348
// RVA: 0x521E80
__int64 __fastcall UFG::FaceMeterComponent::ApplyEvent(UFG::FaceMeterComponent *this, UFG::FaceEventParameters *parameters)
{
  UFG::FaceEventParameters *v2; // rsi
  int v3; // edx
  unsigned __int8 v4; // bl
  UFG::FaceMeterComponent *v5; // rdi
  int v6; // edx
  UFG::GameStatTracker *v7; // rax
  int v8; // eax
  unsigned __int8 v9; // al
  UFG::GameStatTracker *v10; // rax
  int v11; // eax
  UFG::qPropertySet *v12; // r8

  v2 = parameters;
  v3 = parameters->mType;
  v4 = 0;
  v5 = this;
  if ( v3 <= 107 )
  {
    v12 = v2->mpPropertySet;
    if ( v2->mIsApply )
      v9 = UFG::FaceMeterComponent::_ApplyEvent(this, (UFG::GameStatEventType)v3, v12);
    else
      v9 = UFG::FaceMeterComponent::_UnapplyEvent(this, (UFG::GameStatEventType)v3, v12);
    return v9;
  }
  v6 = v3 - 108;
  if ( v6 )
  {
    if ( v6 == 1 )
    {
      v7 = UFG::FactionInterface::Get();
      v8 = UFG::FactionInterface::GetFaction(&v7->mFactionInterface, v2->mpSimObject);
      if ( v8 == 3 )
        return (unsigned __int8)UFG::FaceMeterComponent::_ApplyEvent(v5, GameStatEvent_FSR_MurderCop);
      if ( (unsigned int)(v8 - 16) <= 1 )
        return (unsigned __int8)UFG::FaceMeterComponent::_ApplyEvent(v5, GameStatEvent_FSR_MurderCivilian);
    }
  }
  else
  {
    v10 = UFG::FactionInterface::Get();
    v11 = UFG::FactionInterface::GetFaction(&v10->mFactionInterface, v2->mpSimObject);
    if ( v11 == 3 )
      return (unsigned __int8)UFG::FaceMeterComponent::_ApplyEvent(v5, GameStatEvent_FSR_DamageCop);
    if ( (unsigned int)(v11 - 16) <= 1 )
      return (unsigned __int8)UFG::FaceMeterComponent::_ApplyEvent(v5, GameStatEvent_FSR_DamageCivilian);
  }
  return v4;
}

// File Line: 438
// RVA: 0x534200
void __fastcall UFG::FaceMeterComponent::HandleGameStatEvent(UFG::FaceMeterComponent *this, UFG::Event *e)
{
  signed int v2; // er14
  UFG::SimObjectCharacter *v3; // rbp
  UFG::FaceMeterComponent *v4; // r15
  char v5; // si
  UFG::SimObjectCharacter *v6; // rdi
  unsigned __int16 v7; // cx
  UFG::SimComponent *v8; // rbx
  unsigned int v9; // edx
  unsigned int v10; // er8
  signed __int64 v11; // rbx
  unsigned int v12; // edx
  unsigned int v13; // er8
  unsigned __int64 v14; // rax
  signed __int64 v15; // rcx
  bool pIsAmbient; // [rsp+58h] [rbp+10h]
  bool pIsCop; // [rsp+60h] [rbp+18h]

  v2 = (signed int)e[1].vfptr;
  v3 = (UFG::SimObjectCharacter *)e[1].mPrev;
  v4 = this;
  v5 = 1;
  v6 = (UFG::SimObjectCharacter *)UFG::getTarget((UFG::SimObject *)&v3->vfptr, eTARGET_TYPE_GRAPPLE);
  UFG::GameStatAction::Player::HandleGameStatEvent((UFG::SimObject *)&v3->vfptr, (UFG::SimObject *)&v6->vfptr, v2);
  if ( v6 == LocalPlayer || !v6 )
  {
    v6 = v3;
    if ( !v3 )
      goto LABEL_31;
  }
  v7 = v6->m_Flags;
  if ( !((v7 >> 14) & 1) )
  {
    if ( (v7 & 0x8000u) != 0 )
    {
      v8 = v6->m_Components.p[6].m_pComponent;
      goto LABEL_24;
    }
    if ( (v7 >> 13) & 1 )
    {
      v9 = v6->mComponentTableEntryCount;
      v10 = v6->m_Components.size;
      if ( v9 < v10 )
      {
        v11 = (signed __int64)&v6->m_Components.p[v9];
        while ( (*(_DWORD *)(v11 + 8) & 0xFE000000) != (UFG::HealthComponent::_TypeUID & 0xFE000000)
             || UFG::HealthComponent::_TypeUID & ~*(_DWORD *)(v11 + 8) & 0x1FFFFFF )
        {
          ++v9;
          v11 += 16i64;
          if ( v9 >= v10 )
            goto LABEL_14;
        }
LABEL_15:
        v8 = *(UFG::SimComponent **)v11;
        goto LABEL_24;
      }
    }
    else
    {
      if ( !((v7 >> 12) & 1) )
      {
        v8 = UFG::SimObject::GetComponentOfType((UFG::SimObject *)&v6->vfptr, UFG::HealthComponent::_TypeUID);
        goto LABEL_24;
      }
      v12 = v6->mComponentTableEntryCount;
      v13 = v6->m_Components.size;
      if ( v12 < v13 )
      {
        v11 = (signed __int64)&v6->m_Components.p[v12];
        while ( (*(_DWORD *)(v11 + 8) & 0xFE000000) != (UFG::HealthComponent::_TypeUID & 0xFE000000)
             || UFG::HealthComponent::_TypeUID & ~*(_DWORD *)(v11 + 8) & 0x1FFFFFF )
        {
          ++v12;
          v11 += 16i64;
          if ( v12 >= v13 )
          {
            v8 = 0i64;
            goto LABEL_24;
          }
        }
        goto LABEL_15;
      }
    }
LABEL_14:
    v8 = 0i64;
    goto LABEL_24;
  }
  v8 = v6->m_Components.p[6].m_pComponent;
LABEL_24:
  pIsCop = 0;
  pIsAmbient = 0;
  UFG::GameStatAction::MissionScoring::DeduceFaction((UFG::SimObject *)&v6->vfptr, &pIsCop, &pIsAmbient);
  v5 = 1;
  if ( pIsAmbient )
    v5 = 0;
  if ( v8
    && (BYTE5(v8[1].m_BoundComponentHandles.mNode.mPrev)
     || !BYTE6(v8[1].m_BoundComponentHandles.mNode.mPrev)
     || BYTE1(v8[1].m_BoundComponentHandles.mNode.mNext)) )
  {
    v5 = 0;
  }
LABEL_31:
  if ( v3 == LocalPlayer
    || (v14 = (unsigned int)(v2 - 34), (unsigned int)v14 > 0x35)
    || (v15 = 0x25000000001001i64, !_bittest64(&v15, v14)) )
  {
    if ( v5 == 1 )
      UFG::FaceMeterComponent::_ApplyEvent(v4, (UFG::GameStatEventType)v2);
  }
}

// File Line: 515
// RVA: 0x563DC0
char __fastcall UFG::FaceMeterComponent::_UnapplyEvent(UFG::FaceMeterComponent *this, UFG::GameStatEventType eventType, UFG::qPropertySet *pPropertySet)
{
  char *v3; // rbx

  if ( !pPropertySet || (signed int)eventType >= 107 )
    return 0;
  v3 = (char *)this + 80 * ((signed int)eventType + 1i64);
  if ( *UFG::qPropertySet::Get<bool>(pPropertySet, (UFG::qSymbol *)&FaceEventSymbol_Disabled.mUID, DEPTH_RECURSE) )
    return 0;
  v3[32] = 0;
  *((_QWORD *)v3 + 3) = UFG::Metrics::msInstance.mSimTimeMSec;
  return 1;
}

// File Line: 544
// RVA: 0x563840
char __fastcall UFG::FaceMeterComponent::_ApplyEvent(UFG::FaceMeterComponent *this, UFG::GameStatEventType eventType, UFG::qPropertySet *pPropertySet)
{
  UFG::qPropertySet *v3; // rsi
  __int64 v4; // rdi
  UFG::FaceMeterComponent *v5; // rbp
  float *v6; // rbx
  UFG::qSymbol *v7; // rax
  UFG::qStaticSymbol *v8; // rcx
  float v9; // xmm7_4
  float *v10; // rax
  float *v11; // rcx
  float v12; // xmm6_4
  float v13; // xmm9_4
  float v14; // xmm0_4
  float v15; // xmm1_4
  float v16; // xmm2_4
  char *v17; // r15
  float v18; // xmm1_4
  __int128 v19; // xmm1
  UFG::GameStatTracker *v20; // rax
  __int64 v21; // rax
  int v22; // edx
  UFG::qString v24; // [rsp+38h] [rbp-90h]
  UFG::qSymbol faceadjustmenttype; // [rsp+E0h] [rbp+18h]
  int v26; // [rsp+E8h] [rbp+20h]

  v3 = pPropertySet;
  v4 = eventType;
  v5 = this;
  if ( pPropertySet )
  {
    if ( (signed int)eventType < 107 )
    {
      v6 = (float *)((char *)this + 80 * ((signed int)eventType + 1i64));
      if ( !*UFG::qPropertySet::Get<bool>(pPropertySet, (UFG::qSymbol *)&FaceEventSymbol_Disabled.mUID, DEPTH_RECURSE) )
      {
        v7 = UFG::qPropertySet::Get<UFG::qSymbol>(
               v3,
               (UFG::qSymbol *)&FaceEventSymbol_AdjustmentType.mUID,
               DEPTH_RECURSE);
        v8 = &qSymbol_Any;
        if ( v7 )
          v8 = (UFG::qStaticSymbol *)v7;
        faceadjustmenttype.mUID = v8->mUID;
        *v6 = *UFG::qPropertySet::Get<float>(v3, (UFG::qSymbol *)&FaceEventSymbol_FaceAdjustment.mUID, DEPTH_RECURSE);
        v6[3] = *UFG::qPropertySet::Get<float>(
                   v3,
                   (UFG::qSymbol *)&FaceEventSymbol_MultiplierReduction.mUID,
                   DEPTH_RECURSE);
        v6[4] = *UFG::qPropertySet::Get<float>(
                   v3,
                   (UFG::qSymbol *)&FaceEventSymbol_MultiplierResetTimer.mUID,
                   DEPTH_RECURSE);
        v9 = *(float *)&FLOAT_1_0;
        if ( UFG::Metrics::IsTimeScaled(&UFG::Metrics::msInstance) )
        {
          v26 = 1065353216;
          v10 = UFG::qPropertySet::Get<float>(
                  v3,
                  (UFG::qSymbol *)&FaceEventSymbol_MultiplierSlowMode.mUID,
                  DEPTH_RECURSE);
          v11 = (float *)&v26;
          if ( v10 )
            v11 = v10;
          v12 = *v11;
        }
        else
        {
          v12 = *(float *)&FLOAT_1_0;
        }
        UFG::GameStatAction::Player::RegisterSuccessFaceEvent(&faceadjustmenttype);
        v5->mLastActionPerformedTimestamp = UFG::Metrics::msInstance.mSimTimeMSec;
        v13 = v6[1];
        *((_BYTE *)v6 + 32) = 1;
        *((_QWORD *)v6 + 3) = UFG::Metrics::msInstance.mSimTimeMSec;
        v14 = v13 - v6[3];
        if ( v14 <= 0.0 )
        {
          v14 = 0.0;
        }
        else
        {
          v15 = FLOAT_2_0;
          if ( v14 >= 2.0 )
          {
LABEL_16:
            v6[1] = v15;
            v16 = v6[4];
            if ( v16 <= 0.0 )
              v6[2] = 1.0;
            else
              v6[2] = (float)(1.0 - v15) / v16;
            v17 = UFG::qPropertySet::Get<char const *>(
                    v3,
                    (UFG::qSymbol *)&FaceEventSymbol_XPFlasherCaption.mUID,
                    DEPTH_RECURSE);
            v18 = *UFG::qPropertySet::Get<float>(v3, (UFG::qSymbol *)&FaceEventSymbol_CopPoints.mUID, DEPTH_RECURSE);
            if ( v18 < 0.0 )
              UFG::GameStatAction::MissionScoring::LogCopEvent(
                COP_FSR_MOVES,
                (signed int)(float)(v13 * v18),
                &customWorldMapCaption);
            v19 = *(unsigned int *)UFG::qPropertySet::Get<float>(
                                     v3,
                                     (UFG::qSymbol *)&FaceEventSymbol_TriadPoints.mUID,
                                     DEPTH_RECURSE);
            if ( *(float *)&v19 > 0.0 )
              UFG::GameStatAction::MissionScoring::LogTriadEvent(
                TRIAD_FSR_MOVES,
                (signed int)(float)(v13 * *(float *)&v19),
                v17);
            if ( UFG::IsAnyLocalPlayer(v5->m_pSimObject) )
              v9 = UFG::PlayerBuffTracker::GetFaceMeterEarnedMultiplier() + 1.0;
            v20 = UFG::GameStatTracker::Instance();
            if ( UFG::GameStatTracker::GetStat(v20, PlayerFaceMeterBuff_Activated) < 0.0 )
              UFG::GameStatAction::Player::ClampAndApplyDeltaCombatMeter(
                (float)((float)(v12 * *v6) * v13) * v9,
                faceadjustmenttype.mUID);
            UFG::qString::qString(&v24, "%d %s", (unsigned int)(signed int)*v6, UFG::GameStatEventStrings[v4]);
            UFG::qString::Set(
              &UFG::UIHKScreenHud::CombatMeter->mDebugFaceEventCaption,
              *(const char **)(v21 + 24),
              *(_DWORD *)(v21 + 20),
              0i64,
              0);
            UFG::qString::~qString(&v24);
            switch ( (_DWORD)v4 )
            {
              case 0x31:
                v22 = 1;
                break;
              case 0x2F:
                v22 = 2;
                break;
              case 0x32:
                v22 = 3;
                break;
              case 0x14:
                v22 = 4;
                break;
              case 0x46:
                v22 = 5;
                break;
              default:
                return 1;
            }
            UFG::UIHKCombatMeterWidget::PipsUsed(UFG::UIHKScreenHud::CombatMeter, v22);
            return 1;
          }
        }
        v15 = v14;
        goto LABEL_16;
      }
    }
  }
  return 0;
}

// File Line: 632
// RVA: 0x563750
char __fastcall UFG::FaceMeterComponent::_ApplyEvent(UFG::FaceMeterComponent *this, UFG::GameStatEventType eventType)
{
  UFG::GameStatEventType v2; // er14
  UFG::FaceMeterComponent *v3; // r13
  UFG::qSymbol *v5; // r15
  UFG::qPropertySet *v6; // rdi
  UFG::qPropertyList *v7; // rax
  UFG::qPropertyList *v8; // rbp
  unsigned int v9; // esi
  unsigned int v10; // ebx
  char *v11; // rax
  UFG::qPropertySet *v12; // rcx

  v2 = eventType;
  v3 = this;
  if ( eventType == 107 )
    return 0;
  v5 = UFG::GameStatEventSymbols[eventType];
  v6 = 0i64;
  UFG::PropertySetHandle::Bind(&this->mProperties);
  v7 = UFG::qPropertySet::Get<UFG::qPropertyList>(
         v3->mProperties.mpPropSet,
         (UFG::qSymbol *)&FaceEventSymbol_Events.mUID,
         DEPTH_RECURSE);
  v8 = v7;
  if ( v7 )
  {
    v9 = v7->mNumElements;
    v10 = 0;
    if ( v9 )
    {
      while ( 1 )
      {
        v11 = UFG::qPropertyList::GetValuePtr(v8, 0x1Au, v10);
        if ( v11 && *(_QWORD *)v11 )
          v12 = (UFG::qPropertySet *)&v11[*(_QWORD *)v11];
        else
          v12 = 0i64;
        if ( v5->mUID == v12->mName.mUID )
          break;
        if ( ++v10 >= v9 )
          return UFG::FaceMeterComponent::_ApplyEvent(v3, v2, v6);
      }
      v6 = v12;
    }
  }
  return UFG::FaceMeterComponent::_ApplyEvent(v3, v2, v6);
}

// File Line: 667
// RVA: 0x535660
bool __fastcall UFG::FaceMeterComponent::HasComponent(UFG::SceneObjectProperties *pSceneObj)
{
  UFG::SceneObjectProperties *v1; // rax
  UFG::qPropertySet *v2; // rcx

  v1 = pSceneObj;
  v2 = pSceneObj->mpWritableProperties;
  if ( !v2 )
    v2 = v1->mpConstProperties;
  return UFG::qPropertySet::GetParentFromName(
           v2,
           (UFG::qSymbol *)&SimSymX_propset_componentFaceMeter.mUID,
           DEPTH_RECURSE) != 0i64;
}

// File Line: 673
// RVA: 0x544F40
UFG::SimComponent *__fastcall UFG::FaceMeterComponent::PropertiesOnActivate(UFG::SceneObjectProperties *pSceneObj)
{
  UFG::SceneObjectProperties *v1; // rdi
  UFG::qMemoryPool *v2; // rax
  UFG::allocator::free_link *v3; // rax
  UFG::SimComponent *v4; // rax
  UFG::SimComponent *v5; // rbx
  UFG::SimObjectModifier v7; // [rsp+38h] [rbp-30h]

  v1 = pSceneObj;
  v2 = UFG::GetSimulationMemoryPool();
  v3 = UFG::qMemoryPool::Allocate(v2, 0x21E0ui64, "FaceMeterComponent", 0i64, 1u);
  if ( v3 )
  {
    UFG::FaceMeterComponent::FaceMeterComponent((UFG::FaceMeterComponent *)v3, v1->m_NameUID);
    v5 = v4;
  }
  else
  {
    v5 = 0i64;
  }
  UFG::SimObjectModifier::SimObjectModifier(&v7, v1->m_pSimObject, 1);
  UFG::SimObjectModifier::AttachComponent(&v7, v5, 0xFFFFFFFFi64);
  UFG::SimObjectModifier::Close(&v7);
  UFG::SimObjectModifier::~SimObjectModifier(&v7);
  return v5;
}

