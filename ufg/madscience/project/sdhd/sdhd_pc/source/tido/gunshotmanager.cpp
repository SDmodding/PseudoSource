// File Line: 46
// RVA: 0x155A240
__int64 UFG::_dynamic_initializer_for__meter_critical_gunshot_volume__()
{
  meter_critical_gunshot_volume.mUID = UFG::qWiseSymbolUIDFromString("meter_critical_gunshot_volume", 0x811C9DC5);
  _((AMD_HD3D *)meter_critical_gunshot_volume.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__meter_critical_gunshot_volume__);
}

// File Line: 47
// RVA: 0x155D060
__int64 UFG::_dynamic_initializer_for__stop_gunshot_loop_p__()
{
  stop_gunshot_loop_p.mUID = UFG::qWiseSymbolUIDFromString("stop_gunshot_loop_p", 0x811C9DC5);
  _((AMD_HD3D *)stop_gunshot_loop_p.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__stop_gunshot_loop_p__);
}

// File Line: 48
// RVA: 0x155D010
__int64 UFG::_dynamic_initializer_for__stop_gunshot_loop_ai__()
{
  stop_gunshot_loop_ai.mUID = UFG::qWiseSymbolUIDFromString("stop_gunshot_loop_ai", 0x811C9DC5);
  _((AMD_HD3D *)stop_gunshot_loop_ai.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__stop_gunshot_loop_ai__);
}

// File Line: 49
// RVA: 0x155A9F0
__int64 UFG::_dynamic_initializer_for__play_gunshot_tail_p__()
{
  play_gunshot_tail_p.mUID = UFG::qWiseSymbolUIDFromString("play_gunshot_tail_p", 0x811C9DC5);
  _((AMD_HD3D *)play_gunshot_tail_p.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__play_gunshot_tail_p__);
}

// File Line: 50
// RVA: 0x155A9A0
__int64 UFG::_dynamic_initializer_for__play_gunshot_tail_ai__()
{
  play_gunshot_tail_ai.mUID = UFG::qWiseSymbolUIDFromString("play_gunshot_tail_ai", 0x811C9DC5);
  _((AMD_HD3D *)play_gunshot_tail_ai.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__play_gunshot_tail_ai__);
}

// File Line: 51
// RVA: 0x155A810
__int64 UFG::_dynamic_initializer_for__play_gunshot__()
{
  play_gunshot_0.mUID = UFG::qWiseSymbolUIDFromString("play_gunshot", 0x811C9DC5);
  _((AMD_HD3D *)play_gunshot_0.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__play_gunshot__);
}

// File Line: 52
// RVA: 0x155A860
__int64 UFG::_dynamic_initializer_for__play_gunshot_loop_ai__()
{
  play_gunshot_loop_ai.mUID = UFG::qWiseSymbolUIDFromString("play_gunshot_loop_ai", 0x811C9DC5);
  _((AMD_HD3D *)play_gunshot_loop_ai.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__play_gunshot_loop_ai__);
}

// File Line: 53
// RVA: 0x155A8B0
__int64 UFG::_dynamic_initializer_for__play_gunshot_loop_p__()
{
  play_gunshot_loop_p.mUID = UFG::qWiseSymbolUIDFromString("play_gunshot_loop_p", 0x811C9DC5);
  _((AMD_HD3D *)play_gunshot_loop_p.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__play_gunshot_loop_p__);
}

// File Line: 54
// RVA: 0x155A900
__int64 UFG::_dynamic_initializer_for__play_gunshot_single_ai__()
{
  play_gunshot_single_ai.mUID = UFG::qWiseSymbolUIDFromString("play_gunshot_single_ai", 0x811C9DC5);
  _((AMD_HD3D *)play_gunshot_single_ai.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__play_gunshot_single_ai__);
}

// File Line: 55
// RVA: 0x155A950
__int64 UFG::_dynamic_initializer_for__play_gunshot_single_p__()
{
  play_gunshot_single_p.mUID = UFG::qWiseSymbolUIDFromString("play_gunshot_single_p", 0x811C9DC5);
  _((AMD_HD3D *)play_gunshot_single_p.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__play_gunshot_single_p__);
}

// File Line: 56
// RVA: 0x155CE80
__int64 UFG::_dynamic_initializer_for__shot_loop_duration__()
{
  shot_loop_duration.mUID = UFG::qWiseSymbolUIDFromString("shot_loop_duration", 0x811C9DC5);
  _((AMD_HD3D *)shot_loop_duration.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__shot_loop_duration__);
}

// File Line: 58
// RVA: 0x155AE00
__int64 UFG::_dynamic_initializer_for__player__()
{
  player.mUID = UFG::qWiseSymbolUIDFromString("player", 0x811C9DC5);
  _((AMD_HD3D *)player.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__player__);
}

// File Line: 59
// RVA: 0x1559870
__int64 UFG::_dynamic_initializer_for__ai__()
{
  ai.mUID = UFG::qWiseSymbolUIDFromString("ai", 0x811C9DC5);
  _((AMD_HD3D *)ai.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__ai__);
}

// File Line: 60
// RVA: 0x155D370
__int64 UFG::_dynamic_initializer_for__weapon_owner_type__()
{
  weapon_owner_type.mUID = UFG::qWiseSymbolUIDFromString("weapon_owner_type", 0x811C9DC5);
  _((AMD_HD3D *)weapon_owner_type.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__weapon_owner_type__);
}

// File Line: 61
// RVA: 0x155D3C0
__int64 UFG::_dynamic_initializer_for__weapon_type__()
{
  weapon_type.mUID = UFG::qWiseSymbolUIDFromString("weapon_type", 0x811C9DC5);
  _((AMD_HD3D *)weapon_type.mUID);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__weapon_type__);
}

// File Line: 71
// RVA: 0x594610
void __fastcall UFG::GunshotManagerGunInfo::~GunshotManagerGunInfo(UFG::GunshotManagerGunInfo *this)
{
  UFG::qSafePointer<UFG::SimObject,UFG::SimObject> *p_simObject; // rdx
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *mPrev; // rcx
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *mNext; // rax
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *v5; // rcx
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *v6; // rax
  UFG::qNode<UFG::GunshotManagerGunInfo,UFG::GunshotManagerGunInfo> *v7; // rcx
  UFG::qNode<UFG::GunshotManagerGunInfo,UFG::GunshotManagerGunInfo> *v8; // rax

  this->vfptr = (UFG::GunshotManagerGunInfoVtbl *)&UFG::GunshotManagerGunInfo::`vftable;
  p_simObject = &this->simObject;
  if ( this->simObject.m_pPointer )
  {
    mPrev = p_simObject->mPrev;
    mNext = p_simObject->mNext;
    mPrev->mNext = mNext;
    mNext->mPrev = mPrev;
    p_simObject->mPrev = p_simObject;
    p_simObject->mNext = p_simObject;
  }
  p_simObject->m_pPointer = 0i64;
  v5 = p_simObject->mPrev;
  v6 = p_simObject->mNext;
  v5->mNext = v6;
  v6->mPrev = v5;
  p_simObject->mPrev = p_simObject;
  p_simObject->mNext = p_simObject;
  v7 = this->mPrev;
  v8 = this->mNext;
  v7->mNext = v8;
  v8->mPrev = v7;
  this->mPrev = &this->UFG::qNode<UFG::GunshotManagerGunInfo,UFG::GunshotManagerGunInfo>;
  this->mNext = &this->UFG::qNode<UFG::GunshotManagerGunInfo,UFG::GunshotManagerGunInfo>;
}

// File Line: 77
// RVA: 0x59F620
void __fastcall UFG::GunshotManagerGunInfo::Init(UFG::GunshotManagerGunInfo *this, UFG::SimObject *pSimObject)
{
  UFG::qSafePointer<UFG::SimObject,UFG::SimObject> *p_simObject; // r9
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *mPrev; // r8
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *mNext; // rax
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *v6; // rax
  UFG::SimObject *m_pPointer; // rcx
  UFG::InventoryItemComponent *ComponentOfType; // rax
  UFG::SimObjectCharacter *v9; // rbx
  UFG::qBaseNodeRB *OwnerSimObject; // rax
  UFG::SimObjectProp *v11; // rcx
  __int16 m_Flags; // dx
  UFG::SimObjectWeaponPropertiesComponent *ComponentOfTypeHK; // rax

  p_simObject = &this->simObject;
  if ( this->simObject.m_pPointer )
  {
    mPrev = p_simObject->mPrev;
    mNext = this->simObject.mNext;
    mPrev->mNext = mNext;
    mNext->mPrev = mPrev;
    p_simObject->mPrev = p_simObject;
    this->simObject.mNext = &this->simObject;
  }
  this->simObject.m_pPointer = pSimObject;
  if ( pSimObject )
  {
    v6 = pSimObject->m_SafePointerList.UFG::qSafePointerNodeWithCallbacks<UFG::SimObject>::UFG::qSafePointerNode<UFG::SimObject>::mNode.mPrev;
    v6->mNext = p_simObject;
    p_simObject->mPrev = v6;
    this->simObject.mNext = &pSimObject->m_SafePointerList.UFG::qSafePointerNodeWithCallbacks<UFG::SimObject>::UFG::qSafePointerNode<UFG::SimObject>::mNode;
    pSimObject->m_SafePointerList.UFG::qSafePointerNodeWithCallbacks<UFG::SimObject>::UFG::qSafePointerNode<UFG::SimObject>::mNode.mPrev = p_simObject;
  }
  m_pPointer = this->simObject.m_pPointer;
  *(_WORD *)&this->hasInventory = 0;
  this->rateOfFire = 0.0;
  this->isPlayer = 0;
  this->numContinuousShotsFired = 0;
  *(_QWORD *)&this->fireMode = 0i64;
  if ( m_pPointer )
  {
    ComponentOfType = (UFG::InventoryItemComponent *)UFG::SimObject::GetComponentOfType(
                                                       m_pPointer,
                                                       UFG::InventoryItemComponent::_TypeUID);
    if ( ComponentOfType )
    {
      this->hasInventory = 1;
      v9 = LocalPlayer;
      OwnerSimObject = UFG::InventoryItemComponent::GetOwnerSimObject(ComponentOfType);
      v11 = (UFG::SimObjectProp *)this->simObject.m_pPointer;
      this->isPlayer = OwnerSimObject == (UFG::qBaseNodeRB *)v9;
      if ( v11->m_pSceneObj )
      {
        this->hasSceneObjectProperties = 1;
        if ( v11 )
        {
          m_Flags = v11->m_Flags;
          if ( (m_Flags & 0x4000) != 0 || m_Flags < 0 )
            goto LABEL_15;
          if ( (m_Flags & 0x2000) != 0 )
          {
            ComponentOfTypeHK = UFG::SimObjectProp::GetComponent<UFG::SimObjectWeaponPropertiesComponent>(v11);
            goto LABEL_17;
          }
          if ( (m_Flags & 0x1000) != 0 )
LABEL_15:
            ComponentOfTypeHK = (UFG::SimObjectWeaponPropertiesComponent *)UFG::SimObjectGame::GetComponentOfTypeHK(
                                                                             v11,
                                                                             UFG::SimObjectWeaponPropertiesComponent::_TypeUID);
          else
            ComponentOfTypeHK = (UFG::SimObjectWeaponPropertiesComponent *)UFG::SimObject::GetComponentOfType(
                                                                             v11,
                                                                             UFG::SimObjectWeaponPropertiesComponent::_TypeUID);
LABEL_17:
          if ( ComponentOfTypeHK )
          {
            this->rateOfFire = ComponentOfTypeHK->mWeaponTypeInfo->mFireModes[ComponentOfTypeHK->mFireMode]->mRateOfFire;
            this->fireMode = ComponentOfTypeHK->mFireMode;
          }
        }
      }
    }
  }
}

// File Line: 121
// RVA: 0x1559CC0
__int64 UFG::_dynamic_initializer_for__gGunshotRequestPool__()
{
  UFG::qFixedAllocator::qFixedAllocator(&UFG::gGunshotRequestPool);
  return atexit((int (__fastcall *)())UFG::_dynamic_atexit_destructor_for__gGunshotRequestPool__);
}

// File Line: 124
// RVA: 0x155A3A0
signed __int64 UFG::_dynamic_initializer_for__num_distant_gunshots__()
{
  signed __int64 result; // rax

  result = UFG::TiDo::CalcWwiseUid("num_distant_gunshots");
  num_distant_gunshots = result;
  return result;
}

// File Line: 125
// RVA: 0x155A380
signed __int64 UFG::_dynamic_initializer_for__num_ai_gunshots__()
{
  signed __int64 result; // rax

  result = UFG::TiDo::CalcWwiseUid("num_ai_gunshots");
  num_ai_gunshots = result;
  return result;
}

// File Line: 126
// RVA: 0x1559A70
signed __int64 UFG::_dynamic_initializer_for__critical_gunshot_volume__()
{
  signed __int64 result; // rax

  result = UFG::TiDo::CalcWwiseUid("critical_gunshot_volume");
  critical_gunshot_volume = result;
  return result;
}

// File Line: 175
// RVA: 0x59D090
UFG::GunshotManager *__fastcall UFG::GunshotManager::GetInstance()
{
  return UFG::GunshotManager::ms_instance;
}

// File Line: 181
// RVA: 0x5AA130
void __fastcall UFG::GunshotManager::RequestShotStart(
        UFG::GunshotManager *this,
        unsigned int soundId,
        UFG::SimObjectProp *simObject)
{
  UFG::GunshotManagerGunInfo *p_mNext; // rbx
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **v7; // rcx
  UFG::SimObjectWeaponPropertiesComponent *ComponentOfTypeHK; // rax
  signed __int16 m_Flags; // cx
  UFG::allocator::free_link *v10; // rax
  UFG::allocator::free_link *v11; // rax
  UFG::qNode<UFG::GunshotManagerGunInfo,UFG::GunshotManagerGunInfo> *mNext; // rax
  char *mFreeListHead; // rbx
  unsigned int v14; // eax
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *v15; // rdx
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *mPrev; // rcx
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *v17; // rax
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *v18; // rax
  float v19; // xmm0_4
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v20; // rcx
  _QWORD *p_mPrev; // rax
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v22; // rax

  p_mNext = (UFG::GunshotManagerGunInfo *)&this->m_gunInfoList.mNode.mNext[-1].mNext;
  v7 = &this->m_activeRequests.mNode.mNext;
  if ( p_mNext == (UFG::GunshotManagerGunInfo *)v7 )
  {
LABEL_17:
    v10 = UFG::qMalloc(0x48ui64, UFG::gGlobalNewName, 0i64);
    p_mNext = (UFG::GunshotManagerGunInfo *)v10;
    if ( v10 )
    {
      v11 = v10 + 1;
      v11->mNext = v11;
      v11[1].mNext = v11;
      p_mNext->vfptr = (UFG::GunshotManagerGunInfoVtbl *)&UFG::GunshotManagerGunInfo::`vftable;
      p_mNext->simObject.mPrev = &p_mNext->simObject;
      p_mNext->simObject.mNext = &p_mNext->simObject;
      p_mNext->simObject.m_pPointer = 0i64;
      UFG::GunshotManagerGunInfo::Init(p_mNext, simObject);
    }
    else
    {
      p_mNext = 0i64;
    }
    mNext = this->m_gunInfoList.mNode.mNext;
    this->m_gunInfoList.mNode.mNext = &p_mNext->UFG::qNode<UFG::GunshotManagerGunInfo,UFG::GunshotManagerGunInfo>;
    p_mNext->mPrev = &this->m_gunInfoList.mNode;
    p_mNext->mNext = mNext;
    mNext->mPrev = &p_mNext->UFG::qNode<UFG::GunshotManagerGunInfo,UFG::GunshotManagerGunInfo>;
    goto LABEL_21;
  }
  while ( simObject != p_mNext->simObject.m_pPointer )
  {
    p_mNext = (UFG::GunshotManagerGunInfo *)&p_mNext->mNext[-1].mNext;
    if ( p_mNext == (UFG::GunshotManagerGunInfo *)v7 )
      goto LABEL_17;
  }
  if ( !simObject )
  {
    ComponentOfTypeHK = 0i64;
    goto LABEL_15;
  }
  m_Flags = simObject->m_Flags;
  if ( (m_Flags & 0x4000) != 0 || m_Flags < 0 )
    goto LABEL_13;
  if ( (m_Flags & 0x2000) != 0 )
  {
    ComponentOfTypeHK = UFG::SimObjectProp::GetComponent<UFG::SimObjectWeaponPropertiesComponent>(simObject);
    goto LABEL_15;
  }
  if ( (m_Flags & 0x1000) != 0 )
LABEL_13:
    ComponentOfTypeHK = (UFG::SimObjectWeaponPropertiesComponent *)UFG::SimObjectGame::GetComponentOfTypeHK(
                                                                     simObject,
                                                                     UFG::SimObjectWeaponPropertiesComponent::_TypeUID);
  else
    ComponentOfTypeHK = (UFG::SimObjectWeaponPropertiesComponent *)UFG::SimObject::GetComponentOfType(
                                                                     simObject,
                                                                     UFG::SimObjectWeaponPropertiesComponent::_TypeUID);
LABEL_15:
  if ( ComponentOfTypeHK->mFireMode != p_mNext->fireMode )
  {
    UFG::GunshotManager::StopGun(this, p_mNext);
    UFG::GunshotManagerGunInfo::Init(p_mNext, simObject);
  }
LABEL_21:
  ++p_mNext->numContinuousShotsFired;
  p_mNext->timeSinceLastShot = 0.0;
  if ( p_mNext->state != State_Looping )
  {
    mFreeListHead = UFG::gGunshotRequestPool.mFreeListHead;
    if ( UFG::gGunshotRequestPool.mFreeListHead )
    {
      UFG::gGunshotRequestPool.mFreeListHead = *(char **)UFG::gGunshotRequestPool.mFreeListHead;
      v14 = UFG::gGunshotRequestPool.mNumSlotsAllocated + 1;
      UFG::gGunshotRequestPool.mNumSlotsAllocated = v14;
      if ( UFG::gGunshotRequestPool.mMostSlotsAllocated <= v14 )
        UFG::gGunshotRequestPool.mMostSlotsAllocated = v14;
    }
    else
    {
      UFG::qFixedAllocator::ReportFull(&UFG::gGunshotRequestPool);
    }
    if ( mFreeListHead )
    {
      *(_QWORD *)mFreeListHead = mFreeListHead;
      *((_QWORD *)mFreeListHead + 1) = mFreeListHead;
      *((_QWORD *)mFreeListHead + 2) = 0i64;
      *((_QWORD *)mFreeListHead + 3) = mFreeListHead + 24;
      *((_QWORD *)mFreeListHead + 4) = mFreeListHead + 24;
      *((_QWORD *)mFreeListHead + 5) = 0i64;
      *((_QWORD *)mFreeListHead + 6) = 0i64;
      mFreeListHead[56] &= 0xF0u;
    }
    else
    {
      mFreeListHead = 0i64;
    }
    if ( mFreeListHead )
    {
      v15 = (UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *)(mFreeListHead + 24);
      if ( *((_QWORD *)mFreeListHead + 5) )
      {
        mPrev = v15->mPrev;
        v17 = (UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *)*((_QWORD *)mFreeListHead
                                                                                             + 4);
        mPrev->mNext = v17;
        v17->mPrev = mPrev;
        v15->mPrev = v15;
        *((_QWORD *)mFreeListHead + 4) = mFreeListHead + 24;
      }
      *((_QWORD *)mFreeListHead + 5) = simObject;
      if ( simObject )
      {
        v18 = simObject->m_SafePointerList.UFG::SimObjectGame::UFG::SimObject::UFG::qSafePointerNodeWithCallbacks<UFG::SimObject>::UFG::qSafePointerNode<UFG::SimObject>::mNode.mPrev;
        v18->mNext = v15;
        v15->mPrev = v18;
        *((_QWORD *)mFreeListHead + 4) = &simObject->m_SafePointerList;
        simObject->m_SafePointerList.UFG::SimObjectGame::UFG::SimObject::UFG::qSafePointerNodeWithCallbacks<UFG::SimObject>::UFG::qSafePointerNode<UFG::SimObject>::mNode.mPrev = v15;
      }
      *((_DWORD *)mFreeListHead + 4) = soundId;
      v19 = UFG::GunshotRequest::CalcDistance2ToListener((UFG::GunshotRequest *)mFreeListHead);
      *((float *)mFreeListHead + 5) = v19;
      v20 = this->m_newRequests.mNode.mNext;
      if ( v20 == (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)this )
      {
        this->m_newRequests.mNode.mNext = (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)mFreeListHead;
        *(_QWORD *)mFreeListHead = this;
      }
      else
      {
        if ( v19 > *((float *)&v20[1].mPrev + 1) )
        {
          do
          {
            if ( v20 == (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)this )
              break;
            v20 = v20->mNext;
          }
          while ( v19 > *((float *)&v20[1].mPrev + 1) );
          if ( v19 > *((float *)&v20[1].mPrev + 1) )
          {
            p_mPrev = &v20->mNext->mPrev;
            v20->mNext = (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)mFreeListHead;
            *(_QWORD *)mFreeListHead = v20;
            *((_QWORD *)mFreeListHead + 1) = p_mPrev;
            *p_mPrev = mFreeListHead;
            return;
          }
        }
        v22 = v20->mPrev;
        v22->mNext = (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)mFreeListHead;
        *(_QWORD *)mFreeListHead = v22;
      }
      *((_QWORD *)mFreeListHead + 1) = v20;
      v20->mPrev = (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)mFreeListHead;
    }
  }
}

// File Line: 252
// RVA: 0x5AA060
void __fastcall UFG::GunshotManager::RequestShotEnd(
        UFG::GunshotManager *this,
        unsigned int soundId,
        UFG::SimObject *simObject)
{
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *mNext; // rbx
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **p_mNext; // r9
  UFG::GunshotManagerGunInfo *v6; // rdx
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *mPrev; // rcx
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v8; // rax

  mNext = this->m_newRequests.mNode.mNext;
  if ( mNext != (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)this )
  {
    while ( simObject != (UFG::SimObject *)mNext[2].mNext )
    {
      mNext = mNext->mNext;
      if ( mNext == (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)this )
        goto LABEL_4;
    }
    goto LABEL_15;
  }
LABEL_4:
  mNext = this->m_activeRequests.mNode.mNext;
  p_mNext = &this->m_activeRequests.mNode.mNext;
  if ( mNext == (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)&this->m_activeRequests )
  {
LABEL_7:
    mNext = 0i64;
  }
  else
  {
    while ( simObject != (UFG::SimObject *)mNext[2].mNext )
    {
      mNext = mNext->mNext;
      if ( mNext == (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)&this->m_activeRequests )
        goto LABEL_7;
    }
  }
  v6 = (UFG::GunshotManagerGunInfo *)&this->m_gunInfoList.mNode.mNext[-1].mNext;
  if ( v6 == (UFG::GunshotManagerGunInfo *)p_mNext )
  {
LABEL_11:
    v6 = 0i64;
  }
  else
  {
    while ( simObject != v6->simObject.m_pPointer )
    {
      v6 = (UFG::GunshotManagerGunInfo *)&v6->mNext[-1].mNext;
      if ( v6 == (UFG::GunshotManagerGunInfo *)p_mNext )
        goto LABEL_11;
    }
  }
  if ( mNext )
  {
    if ( ((__int64)mNext[3].mNext & 1) != 0
      || !UFG::GunshotManager::HandleRequestEndAsOneShot(this, (UFG::GunshotRequest *)mNext, soundId) )
    {
LABEL_15:
      mPrev = mNext->mPrev;
      v8 = mNext->mNext;
      mPrev->mNext = v8;
      v8->mPrev = mPrev;
      mNext->mPrev = mNext;
      mNext->mNext = mNext;
      UFG::GunshotRequest::~GunshotRequest((UFG::GunshotRequest *)mNext);
      mNext->mPrev = (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)UFG::gGunshotRequestPool.mFreeListHead;
      --UFG::gGunshotRequestPool.mNumSlotsAllocated;
      UFG::gGunshotRequestPool.mFreeListHead = (char *)mNext;
    }
  }
  else if ( v6->state == State_Looping )
  {
    UFG::GunshotManager::StopGun(this, v6);
  }
}

// File Line: 392
// RVA: 0x5ACA60
void __fastcall UFG::GunshotManager::StopGun(UFG::GunshotManager *this, UFG::GunshotManagerGunInfo *pGunInfo)
{
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *mNext; // rbx
  UFG::qList<UFG::GunshotRequest,UFG::GunshotRequest,1,0> *p_m_activeRequests; // rbp
  unsigned int mUID; // r8d

  mNext = this->m_activeRequests.mNode.mNext;
  p_m_activeRequests = &this->m_activeRequests;
  if ( mNext == (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)&this->m_activeRequests )
  {
    pGunInfo->state = State_OneShots;
    pGunInfo->numContinuousShotsFired = 0;
  }
  else
  {
    do
    {
      if ( pGunInfo->simObject.m_pPointer == (UFG::SimObject *)mNext[2].mNext
        && ((__int64)mNext[3].mNext & 8) != 0
        && UFG::OneShotHandle::IsValid((UFG::OneShotHandle *)&mNext[3]) )
      {
        mUID = stop_gunshot_loop_p.mUID;
        if ( ((__int64)mNext[3].mNext & 2) == 0 )
          mUID = stop_gunshot_loop_ai.mUID;
        UFG::OneShot::Stop((UFG::OneShot *)mNext[3].mPrev, 0, mUID);
      }
      mNext = mNext->mNext;
    }
    while ( mNext != (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)p_m_activeRequests );
    pGunInfo->state = State_OneShots;
    pGunInfo->numContinuousShotsFired = 0;
  }
}

// File Line: 426
// RVA: 0x5AF370
void __fastcall UFG::GunshotManager::Update(UFG::GunshotManager *this, float delta_sec)
{
  float mSimTimeDelta; // xmm8_4
  unsigned int v4; // r12d
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **p_mNext; // rdi
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **v7; // rsi
  float v8; // xmm1_4
  float v9; // xmm0_4
  bool v10; // al
  float mSimTimeScaleDebug; // xmm0_4
  unsigned int mUID; // edx
  UFG::GunshotManager *mNext; // rax
  float v14; // xmm0_4
  bool v15; // cf
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v16; // rbx
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v17; // rax
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v18; // rax
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v19; // rbx
  UFG::qList<UFG::GunshotRequest,UFG::GunshotRequest,1,0> *i; // rbp
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *mPrev; // rcx
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v22; // rax
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v23; // rax
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v24; // rsi
  int v25; // r15d
  UFG::TransformNodeComponent *v26; // rdi
  UFG::TiDo *Instance; // rax
  UFG::Audio3DListener *Listener; // rbx
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v29; // rbx
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v30; // rax
  float m_fallRate; // xmm2_4
  float m_currentValue; // xmm2_4
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *j; // rax

  mSimTimeDelta = UFG::Metrics::msInstance.mSimTimeDelta;
  v4 = 0;
  p_mNext = (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **)&this->m_gunInfoList.mNode.mNext[-1].mNext;
  if ( this->m_gunInfoList.mNode.mNext != (UFG::qNode<UFG::GunshotManagerGunInfo,UFG::GunshotManagerGunInfo> *)8 )
  {
    v7 = &this->m_activeRequests.mNode.mNext;
    do
    {
      if ( p_mNext == v7 )
        break;
      v8 = mSimTimeDelta + *((float *)p_mNext + 7);
      v9 = *((float *)p_mNext + 8) + 0.050000001;
      *((float *)p_mNext + 7) = v8;
      v10 = v8 > v9;
      if ( v8 > v9 && *((_DWORD *)p_mNext + 6) )
        *((_DWORD *)p_mNext + 6) = 0;
      if ( UFG::Metrics::msInstance.mSimPausedDebug )
        mSimTimeScaleDebug = 0.0;
      else
        mSimTimeScaleDebug = UFG::Metrics::msInstance.mSimTimeScaleDebug;
      if ( (float)(mSimTimeScaleDebug * UFG::Metrics::msInstance.mSimTimeScaleInGame) < 1.0 )
        *((_DWORD *)p_mNext + 6) = 0;
      if ( *((_DWORD *)p_mNext + 17) == 1 && v10 )
      {
        mUID = play_gunshot_tail_ai.mUID;
        if ( *((_BYTE *)p_mNext + 36) )
          mUID = play_gunshot_tail_p.mUID;
        UFG::GunshotManager::RequestShotEnd(this, mUID, (UFG::SimObject *)p_mNext[7]);
      }
      mNext = (UFG::GunshotManager *)*v7;
      if ( *v7 == (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)&this->m_activeRequests )
      {
LABEL_20:
        v14 = *((float *)p_mNext + 8);
        if ( v14 == 0.0 )
          v15 = *((float *)p_mNext + 7) > 1.0;
        else
          v15 = (float)(v14 * 10.0) < *((float *)p_mNext + 7);
        if ( v15 )
        {
          v16 = p_mNext[1];
          v17 = p_mNext[2];
          v16->mNext = v17;
          v17->mPrev = v16;
          p_mNext[1] = (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)(p_mNext + 1);
          p_mNext[2] = (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)(p_mNext + 1);
          ((void (__fastcall *)(UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **, __int64))(*p_mNext)->mPrev)(
            p_mNext,
            1i64);
          p_mNext = &v16[-1].mNext;
        }
      }
      else
      {
        while ( p_mNext[7] != (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)mNext->m_gunInfoList.mNode.mNext )
        {
          mNext = (UFG::GunshotManager *)mNext->m_newRequests.mNode.mNext;
          if ( mNext == (UFG::GunshotManager *)&this->m_activeRequests )
            goto LABEL_20;
        }
      }
      if ( !p_mNext )
        break;
      p_mNext = &p_mNext[2][-1].mNext;
    }
    while ( p_mNext );
  }
  v18 = this->m_activeRequests.mNode.mNext;
  v19 = this->m_newRequests.mNode.mNext;
  for ( i = &this->m_activeRequests; v18 != (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)i; v18 = v18->mNext )
    ;
  for ( ; v19; v19 = mPrev->mNext )
  {
    if ( v19 == (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)this )
      break;
    UFG::GunshotManager::HandleRequestAsOneShot(this, (UFG::GunshotRequest *)v19, (UFG::OneShotHandle *)&v19[3]);
    if ( UFG::OneShotHandle::IsValid((UFG::OneShotHandle *)&v19[3]) )
      UFG::OneShot::Play((UFG::OneShot *)v19[3].mPrev, (unsigned int)v19[1].mPrev);
    mPrev = v19->mPrev;
    v22 = v19->mNext;
    mPrev->mNext = v22;
    v22->mPrev = mPrev;
    v19->mPrev = v19;
    v19->mNext = v19;
    if ( mSimTimeDelta > 0.0 )
    {
      v23 = this->m_activeRequests.mNode.mNext;
      this->m_activeRequests.mNode.mNext = v19;
      v19->mPrev = &i->mNode;
      v19->mNext = v23;
      v23->mPrev = v19;
    }
    if ( !mPrev )
      break;
  }
  UFG::qList<UFG::GunshotRequest,UFG::GunshotRequest,1,0>::DeleteNodes(&this->m_newRequests);
  v24 = this->m_activeRequests.mNode.mNext;
  this->m_numDistantGunshots.m_targetValue = 0.0;
  v25 = 0;
  if ( v24 )
  {
    while ( v24 != (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)i )
    {
      if ( ((__int64)v24[3].mNext & 1) != 0 )
      {
        v26 = (UFG::TransformNodeComponent *)v24[2].mNext[5].mNext;
        Instance = UFG::TiDo::GetInstance();
        Listener = UFG::TiDo::GetListener(Instance, 0);
        UFG::TransformNodeComponent::UpdateWorldTransform(v26);
        if ( (float)((float)((float)((float)(Listener->m_matrix.v3.y - v26->mWorldTransform.v3.y)
                                   * (float)(Listener->m_matrix.v3.y - v26->mWorldTransform.v3.y))
                           + (float)((float)(Listener->m_matrix.v3.x - v26->mWorldTransform.v3.x)
                                   * (float)(Listener->m_matrix.v3.x - v26->mWorldTransform.v3.x)))
                   + (float)((float)(Listener->m_matrix.v3.z - v26->mWorldTransform.v3.z)
                           * (float)(Listener->m_matrix.v3.z - v26->mWorldTransform.v3.z))) >= (float)(this->m_maxDistanceAsOneShot * this->m_maxDistanceAsOneShot) )
          goto LABEL_44;
      }
      else if ( UFG::GunshotManager::UpdateRequestAsOneShot(this, (UFG::GunshotRequest *)v24) )
      {
        goto LABEL_44;
      }
      v29 = v24->mPrev;
      v30 = v24->mNext;
      v29->mNext = v30;
      v30->mPrev = v29;
      v24->mPrev = v24;
      v24->mNext = v24;
      UFG::GunshotRequest::~GunshotRequest((UFG::GunshotRequest *)v24);
      v24->mPrev = (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)UFG::gGunshotRequestPool.mFreeListHead;
      --UFG::gGunshotRequestPool.mNumSlotsAllocated;
      UFG::gGunshotRequestPool.mFreeListHead = (char *)v24;
      v24 = v29;
LABEL_44:
      if ( v24 )
      {
        if ( ((__int64)v24[3].mNext & 2) == 0 )
          ++v25;
        v24 = v24->mNext;
        if ( v24 )
          continue;
      }
      break;
    }
  }
  this->m_numAiGunshots.m_riseRate = 1000.0;
  this->m_numAiGunshots.m_fallRate = 1.0;
  this->m_numAiGunshots.m_targetValue = (float)v25;
  if ( (float)v25 < this->m_numAiGunshots.m_currentValue )
    m_fallRate = this->m_numAiGunshots.m_fallRate;
  else
    m_fallRate = this->m_numAiGunshots.m_riseRate;
  UFG::qApproach(&this->m_numAiGunshots.m_currentValue, (float)v25, m_fallRate, delta_sec);
  m_currentValue = this->m_numAiGunshots.m_currentValue;
  if ( m_currentValue != last_num_ai_gunshots )
  {
    UFG::TiDo::SetWwiseRtpcValue(UFG::TiDo::m_pInstance, num_ai_gunshots, m_currentValue, 0xFFFFFFFFFFFFFFFFui64);
    last_num_ai_gunshots = this->m_numAiGunshots.m_currentValue;
  }
  for ( j = this->m_activeRequests.mNode.mNext; j != (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)i; j = j->mNext )
  {
    if ( ((__int64)j[3].mNext & 1) != 0 )
      ++v4;
  }
  UFG::GunshotManager::UpdateStream(this, v4, delta_sec);
}G::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)i; j = j->mNext )
  {
    if ( ((__int64)j[3].mNext & 1) != 0 )
      

// File Line: 616
// RVA: 0x1559A00
signed __int64 UFG::_dynamic_initializer_for__auto_duration__()
{
  signed __int64 result; // rax

  result = UFG::TiDo::CalcWwiseUid("auto_duration");
  auto_duration = result;
  return result;
}

// File Line: 617
// RVA: 0x1559C20
signed __int64 UFG::_dynamic_initializer_for__enable_gun_distance_effects__()
{
  signed __int64 result; // rax

  result = UFG::TiDo::CalcWwiseUid("enable_gun_distance_effects");
  enable_gun_distance_effects = result;
  return result;
}

// File Line: 620
// RVA: 0x59EEE0
void __fastcall UFG::GunshotManager::HandleRequestAsOneShot(
        UFG::GunshotManager *this,
        UFG::GunshotRequest *pRequest,
        UFG::OneShotHandle *pOneShot)
{
  UFG::qNode<UFG::GunshotManagerGunInfo,UFG::GunshotManagerGunInfo> *mNext; // rdi
  UFG::SimObject *m_pPointer; // rax
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **p_mNext; // rcx
  __int64 v6; // rdi
  UFG::SimObjectWeaponPropertiesComponent *v7; // rbp
  UFG::qMatrix44 *m_pTransformNodeComponent; // rbx
  UFG::SimObject *v11; // r8
  __int16 m_Flags; // cx
  UFG::InventoryItemComponent *m_pComponent; // rax
  bool v14; // zf
  UFG::SimObjectGame *v15; // rcx
  UFG::SimObjectCharacter *v16; // rbx
  UFG::qBaseNodeRB *OwnerSimObject; // rax
  UFG::SimObjectProp *v18; // rcx
  UFG::SceneObjectProperties *m_pSceneObj; // rbx
  bool v20; // r15
  __int16 v21; // dx
  UFG::SimObjectWeaponPropertiesComponent *ComponentOfType; // rax
  UFG::FireModeInfo *v23; // rbx
  float mRateOfFire; // xmm7_4
  float mSimTimeScaleDebug; // xmm6_4
  float v26; // xmm6_4
  float v27; // xmm7_4
  char v28; // cl
  unsigned int v29; // eax
  unsigned int mUID; // eax

  mNext = this->m_gunInfoList.mNode.mNext;
  m_pPointer = pRequest->simObject.m_pPointer;
  p_mNext = &this->m_activeRequests.mNode.mNext;
  v6 = (__int64)&mNext[-1].mNext;
  v7 = 0i64;
  if ( (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **)v6 == p_mNext )
  {
LABEL_4:
    v6 = 0i64;
  }
  else
  {
    while ( m_pPointer != *(UFG::SimObject **)(v6 + 56) )
    {
      v6 = *(_QWORD *)(v6 + 16) - 8i64;
      if ( (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **)v6 == p_mNext )
        goto LABEL_4;
    }
  }
  *((_BYTE *)pRequest + 56) &= ~1u;
  if ( m_pPointer )
  {
    m_pTransformNodeComponent = (UFG::qMatrix44 *)m_pPointer->m_pTransformNodeComponent;
    if ( m_pTransformNodeComponent )
    {
      UFG::TransformNodeComponent::UpdateWorldTransform(m_pPointer->m_pTransformNodeComponent);
      UFG::OneShotPool::GetOneShotHandle(pOneShot, m_pTransformNodeComponent + 2);
      if ( UFG::OneShotHandle::IsValid(pOneShot) )
      {
        v11 = pRequest->simObject.m_pPointer;
        if ( v11 )
        {
          m_Flags = v11->m_Flags;
          if ( (m_Flags & 0x4000) == 0 && m_Flags >= 0 )
          {
            if ( (m_Flags & 0x2000) != 0 )
            {
              m_pComponent = (UFG::InventoryItemComponent *)v11->m_Components.p[11].m_pComponent;
            }
            else
            {
              v14 = (m_Flags & 0x1000) == 0;
              v15 = (UFG::SimObjectGame *)pRequest->simObject.m_pPointer;
              m_pComponent = (UFG::InventoryItemComponent *)(v14
                                                           ? UFG::SimObject::GetComponentOfType(
                                                               v15,
                                                               UFG::InventoryItemComponent::_TypeUID)
                                                           : UFG::SimObjectGame::GetComponentOfTypeHK(
                                                               v15,
                                                               UFG::InventoryItemComponent::_TypeUID));
            }
            if ( m_pComponent )
            {
              v16 = LocalPlayer;
              OwnerSimObject = UFG::InventoryItemComponent::GetOwnerSimObject(m_pComponent);
              v18 = (UFG::SimObjectProp *)pRequest->simObject.m_pPointer;
              v14 = OwnerSimObject == (UFG::qBaseNodeRB *)v16;
              m_pSceneObj = v18->m_pSceneObj;
              v20 = v14;
              if ( !v18 )
              {
LABEL_27:
                if ( m_pSceneObj )
                {
                  if ( v7 )
                  {
                    v23 = v7->mWeaponTypeInfo->mFireModes[v7->mFireMode];
                    if ( v23->mAudioWeaponType.mUID != UFG::qWiseSymbol::get_null()->mUID )
                    {
                      mRateOfFire = v7->mWeaponTypeInfo->mFireModes[v7->mFireMode]->mRateOfFire;
                      *(float *)(v6 + 32) = mRateOfFire;
                      if ( UFG::Metrics::msInstance.mSimPausedDebug )
                        mSimTimeScaleDebug = 0.0;
                      else
                        mSimTimeScaleDebug = UFG::Metrics::msInstance.mSimTimeScaleDebug;
                      v26 = mSimTimeScaleDebug * UFG::Metrics::msInstance.mSimTimeScaleInGame;
                      v27 = (float)(mRateOfFire / v26) * UFG::TidoGame::sm_autoTriggerRateScale;
                      *((_BYTE *)pRequest + 56) ^= (*((_BYTE *)pRequest + 56) ^ (8
                                                                               * v7->mWeaponTypeInfo->mFireModes[v7->mFireMode]->mAudioWeaponIsLooping)) & 8;
                      UFG::AudioEntity::SetWwiseSwitch(
                        pOneShot->m_pOneShot,
                        weapon_type.mUID,
                        v23->mAudioWeaponType.mUID);
                      UFG::AudioEntity::SetRtpcValue(pOneShot->m_pOneShot, shot_loop_duration.mUID, v27);
                      if ( (*((_BYTE *)pRequest + 56) & 8) != 0
                        && *(_DWORD *)(v6 + 24) > (signed int)UFG::TidoGame::sm_numShotsToTriggerGunLoop
                        && v26 >= 1.0 )
                      {
                        v28 = 1;
                        *(_DWORD *)(v6 + 68) = 1;
                      }
                      else
                      {
                        v28 = 0;
                      }
                      if ( v20 )
                      {
                        if ( pRequest->soundId == play_gunshot_0.mUID )
                        {
                          mUID = play_gunshot_single_p.mUID;
                          if ( v28 )
                            mUID = play_gunshot_loop_p.mUID;
                          pRequest->soundId = mUID;
                        }
                        *((_BYTE *)pRequest + 56) |= 2u;
                        UFG::AudioEntity::ApplyEnvironment(
                          pOneShot->m_pOneShot,
                          meter_critical_gunshot_volume.mUID,
                          1.0,
                          1.0,
                          1.0,
                          &UFG::WwiseEnvironment::sm_SFX);
                      }
                      else if ( pRequest->soundId == play_gunshot_0.mUID )
                      {
                        v29 = play_gunshot_single_ai.mUID;
                        if ( v28 )
                          v29 = play_gunshot_loop_ai.mUID;
                        pRequest->soundId = v29;
                      }
                    }
                  }
                }
                return;
              }
              v21 = v18->m_Flags;
              if ( (v21 & 0x4000) == 0 && v21 >= 0 )
              {
                if ( (v21 & 0x2000) != 0 )
                {
                  ComponentOfType = UFG::SimObjectProp::GetComponent<UFG::SimObjectWeaponPropertiesComponent>(v18);
LABEL_26:
                  v7 = ComponentOfType;
                  goto LABEL_27;
                }
                if ( (v21 & 0x1000) == 0 )
                {
                  ComponentOfType = (UFG::SimObjectWeaponPropertiesComponent *)UFG::SimObject::GetComponentOfType(
                                                                                 v18,
                                                                                 UFG::SimObjectWeaponPropertiesComponent::_TypeUID);
                  goto LABEL_26;
                }
              }
              ComponentOfType = (UFG::SimObjectWeaponPropertiesComponent *)UFG::SimObjectGame::GetComponentOfTypeHK(
                                                                             v18,
                                                                             UFG::SimObjectWeaponPropertiesComponent::_TypeUID);
              goto LABEL_26;
            }
          }
        }
      }
    }
  }
}       goto LABEL_26;
            }
          }
        }
      }
    }
  }
}

// File Line: 733
// RVA: 0x5B0FB0
bool __fastcall UFG::GunshotManager::UpdateRequestAsOneShot(UFG::GunshotManager *this, UFG::GunshotRequest *pRequest)
{
  bool result; // al
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **p_mNext; // rax
  float mSimTimeScaleDebug; // xmm0_4
  UFG::TransformNodeComponent *m_pTransformNodeComponent; // rbx
  UFG::OneShot *m_pOneShot; // rcx
  float x; // eax
  float z; // xmm1_4
  UFG::OneShot *v11; // rcx

  if ( pRequest->simObject.m_pPointer || !(result = UFG::OneShotHandle::IsValid(&pRequest->oneShot)) )
  {
    if ( UFG::OneShotHandle::IsValid(&pRequest->oneShot) )
    {
      p_mNext = (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> **)&this->m_gunInfoList.mNode.mNext[-1].mNext;
      if ( p_mNext != &this->m_activeRequests.mNode.mNext )
      {
        while ( (UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *)pRequest->simObject.m_pPointer != p_mNext[7] )
        {
          p_mNext = &p_mNext[2][-1].mNext;
          if ( p_mNext == &this->m_activeRequests.mNode.mNext )
            goto LABEL_12;
        }
        if ( UFG::Metrics::msInstance.mSimPausedDebug )
          mSimTimeScaleDebug = 0.0;
        else
          mSimTimeScaleDebug = UFG::Metrics::msInstance.mSimTimeScaleDebug;
        UFG::AudioEntity::SetRtpcValue(
          pRequest->oneShot.m_pOneShot,
          shot_loop_duration.mUID,
          (float)(*((float *)p_mNext + 8) / (float)(mSimTimeScaleDebug * UFG::Metrics::msInstance.mSimTimeScaleInGame))
        * UFG::TidoGame::sm_autoTriggerRateScale);
      }
LABEL_12:
      m_pTransformNodeComponent = pRequest->simObject.m_pPointer->m_pTransformNodeComponent;
      UFG::TransformNodeComponent::UpdateWorldTransform(m_pTransformNodeComponent);
      m_pOneShot = pRequest->oneShot.m_pOneShot;
      x = m_pTransformNodeComponent->mWorldTransform.v3.x;
      z = m_pTransformNodeComponent->mWorldTransform.v3.z;
      m_pOneShot->m_WorldMatrix.v3.y = m_pTransformNodeComponent->mWorldTransform.v3.y;
      m_pOneShot->m_WorldMatrix.v3.z = z;
      m_pOneShot->m_WorldMatrix.v3.x = x;
      m_pOneShot->m_WorldMatrix.v3.w = 1.0;
      UFG::AudioEntity::ForcePositionUpdate(m_pOneShot);
      v11 = pRequest->oneShot.m_pOneShot;
      if ( (*((_BYTE *)pRequest + 56) & 2) != 0 )
        UFG::AudioEntity::SetRtpcValue(v11, num_distant_gunshots, 0.0);
      else
        UFG::AudioEntity::SetRtpcValue(v11, num_distant_gunshots, this->m_numDistantGunshots.m_currentValue);
      return 1;
    }
    else
    {
      return 0;
    }
  }
  return result;
}

// File Line: 776
// RVA: 0x5B11E0
void __fastcall UFG::GunshotManager::UpdateStream(UFG::GunshotManager *this, int numStreamingRequests, float delta_sec)
{
  UFG::RateLimitedFloatNoMinMax *p_m_numDistantGunshots; // rbx
  float m_targetValue; // xmm1_4
  float m_fallRate; // xmm2_4
  float m_currentValue; // xmm6_4
  UFG::TiDo *Instance; // rax

  p_m_numDistantGunshots = &this->m_numDistantGunshots;
  this->m_numDistantGunshots.m_riseRate = 10000.0;
  this->m_numDistantGunshots.m_fallRate = 0.2;
  this->m_numDistantGunshots.m_targetValue = (float)numStreamingRequests;
  m_targetValue = this->m_numDistantGunshots.m_targetValue;
  if ( m_targetValue < this->m_numDistantGunshots.m_currentValue )
    m_fallRate = this->m_numDistantGunshots.m_fallRate;
  else
    m_fallRate = this->m_numDistantGunshots.m_riseRate;
  UFG::qApproach(&this->m_numDistantGunshots.m_currentValue, m_targetValue, m_fallRate, delta_sec);
  m_currentValue = p_m_numDistantGunshots->m_currentValue;
  if ( p_m_numDistantGunshots->m_currentValue != last_num_distant_gunshots )
  {
    Instance = UFG::TiDo::GetInstance();
    UFG::TiDo::SetWwiseRtpcValue(Instance, num_distant_gunshots, m_currentValue, 0xFFFFFFFFFFFFFFFFui64);
    last_num_distant_gunshots = p_m_numDistantGunshots->m_currentValue;
  }
}

// File Line: 805
// RVA: 0x59F1F0
char __fastcall UFG::GunshotManager::HandleRequestEndAsOneShot(
        UFG::GunshotManager *this,
        UFG::GunshotRequest *pRequest,
        unsigned int soundId)
{
  UFG::GunshotManagerGunInfo *p_mNext; // rdx
  UFG::OneShotHandle v8; // [rsp+48h] [rbp+10h] BYREF

  if ( (*((_BYTE *)pRequest + 56) & 4) != 0 )
    return 1;
  if ( UFG::OneShotHandle::IsValid(&pRequest->oneShot) && (*((_BYTE *)pRequest + 56) & 8) != 0 )
  {
    p_mNext = (UFG::GunshotManagerGunInfo *)&this->m_gunInfoList.mNode.mNext[-1].mNext;
    if ( p_mNext == (UFG::GunshotManagerGunInfo *)&this->m_activeRequests.mNode.mNext )
    {
LABEL_7:
      p_mNext = 0i64;
    }
    else
    {
      while ( pRequest->simObject.m_pPointer != p_mNext->simObject.m_pPointer )
      {
        p_mNext = (UFG::GunshotManagerGunInfo *)&p_mNext->mNext[-1].mNext;
        if ( p_mNext == (UFG::GunshotManagerGunInfo *)&this->m_activeRequests.mNode.mNext )
          goto LABEL_7;
      }
    }
    UFG::GunshotManager::StopGun(this, p_mNext);
  }
  UFG::OneShotHandle::Release(&pRequest->oneShot);
  if ( soundId )
  {
    pRequest->soundId = soundId;
    v8.m_pOneShot = 0i64;
    UFG::GunshotManager::HandleRequestAsOneShot(this, pRequest, &pRequest->oneShot);
    if ( UFG::OneShotHandle::IsValid(&pRequest->oneShot) )
    {
      UFG::OneShot::Play(pRequest->oneShot.m_pOneShot, pRequest->soundId);
      *((_BYTE *)pRequest + 56) |= 4u;
      UFG::OneShotHandle::Release(&v8);
      return 1;
    }
    UFG::OneShotHandle::Release(&v8);
  }
  return 0;
}

// File Line: 849
// RVA: 0x594690
void __fastcall UFG::GunshotRequest::~GunshotRequest(UFG::GunshotRequest *this)
{
  UFG::qSafePointer<UFG::SimObject,UFG::SimObject> *p_simObject; // rdx
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *mPrev; // rcx
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *mNext; // rax
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *v5; // rcx
  UFG::qNode<UFG::qSafePointerBase<UFG::SimObject>,UFG::qSafePointerNodeList> *v6; // rax
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v7; // rcx
  UFG::qNode<UFG::GunshotRequest,UFG::GunshotRequest> *v8; // rax

  UFG::OneShotHandle::Release(&this->oneShot);
  p_simObject = &this->simObject;
  if ( this->simObject.m_pPointer )
  {
    mPrev = p_simObject->mPrev;
    mNext = this->simObject.mNext;
    mPrev->mNext = mNext;
    mNext->mPrev = mPrev;
    p_simObject->mPrev = p_simObject;
    this->simObject.mNext = &this->simObject;
  }
  this->simObject.m_pPointer = 0i64;
  v5 = p_simObject->mPrev;
  v6 = this->simObject.mNext;
  v5->mNext = v6;
  v6->mPrev = v5;
  p_simObject->mPrev = p_simObject;
  this->simObject.mNext = &this->simObject;
  v7 = this->mPrev;
  v8 = this->mNext;
  v7->mNext = v8;
  v8->mPrev = v7;
  this->mPrev = this;
  this->mNext = this;
}

// File Line: 853
// RVA: 0x5974F0
float __fastcall UFG::GunshotRequest::CalcDistance2ToListener(UFG::GunshotRequest *this)
{
  UFG::TransformNodeComponent *m_pTransformNodeComponent; // rdi
  UFG::TiDo *Instance; // rax
  UFG::Audio3DListener *Listener; // rbx

  m_pTransformNodeComponent = this->simObject.m_pPointer->m_pTransformNodeComponent;
  Instance = UFG::TiDo::GetInstance();
  Listener = UFG::TiDo::GetListener(Instance, 0);
  UFG::TransformNodeComponent::UpdateWorldTransform(m_pTransformNodeComponent);
  return (float)((float)((float)(Listener->m_matrix.v3.y - m_pTransformNodeComponent->mWorldTransform.v3.y)
                       * (float)(Listener->m_matrix.v3.y - m_pTransformNodeComponent->mWorldTransform.v3.y))
               + (float)((float)(Listener->m_matrix.v3.x - m_pTransformNodeComponent->mWorldTransform.v3.x)
                       * (float)(Listener->m_matrix.v3.x - m_pTransformNodeComponent->mWorldTransform.v3.x)))
       + (float)((float)(Listener->m_matrix.v3.z - m_pTransformNodeComponent->mWorldTransform.v3.z)
               * (float)(Listener->m_matrix.v3.z - m_pTransformNodeComponent->mWorldTransform.v3.z));
}

