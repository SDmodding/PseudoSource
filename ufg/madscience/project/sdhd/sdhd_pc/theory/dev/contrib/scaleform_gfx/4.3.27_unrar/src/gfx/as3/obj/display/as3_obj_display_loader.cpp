// File Line: 59
// RVA: 0x158B180
__int64 dynamic_initializer_for__Scaleform::GFx::AS3::ThunkFunc0_Scaleform::GFx::AS3::Instances::fl_display::Loader_0_Scaleform::GFx::AS3::SPtr_Scaleform::GFx::AS3::Instances::fl_display::DisplayObject___::Method__()
{
  __int64 result; // rax
  __int64 v1; // [rsp+8h] [rbp-10h]

  LODWORD(v1) = 0;
  result = v1;
  qword_14243C0D0 = v1;
  Scaleform::GFx::AS3::ThunkFunc0<Scaleform::GFx::AS3::Instances::fl_display::Loader,0,Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl_display::DisplayObject>>::Method = Scaleform::GFx::AS3::Instances::fl_display::Loader::contentGet;
  return result;
}

// File Line: 60
// RVA: 0x158B0F0
__int64 dynamic_initializer_for__Scaleform::GFx::AS3::ThunkFunc0_Scaleform::GFx::AS3::Instances::fl_display::Loader_1_Scaleform::GFx::AS3::SPtr_Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo___::Method__()
{
  __int64 result; // rax
  __int64 v1; // [rsp+8h] [rbp-10h]

  LODWORD(v1) = 0;
  result = v1;
  qword_14243C0E0 = v1;
  Scaleform::GFx::AS3::ThunkFunc0<Scaleform::GFx::AS3::Instances::fl_display::Loader,1,Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo>>::Method = (void (__fastcall *const)(Scaleform::GFx::AS3::Instances::fl_display::Loader *, Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo> *))Scaleform::GFx::AS3::Instances::fl_display::Loader::contentLoaderInfoGet;
  return result;
}

// File Line: 61
// RVA: 0x158B120
__int64 dynamic_initializer_for__Scaleform::GFx::AS3::ThunkFunc0_Scaleform::GFx::AS3::Instances::fl_display::Loader_2_Scaleform::GFx::AS3::Value_const__::Method__()
{
  __int64 result; // rax
  __int64 v1; // [rsp+8h] [rbp-10h]

  LODWORD(v1) = 0;
  result = v1;
  qword_14243C0F0 = v1;
  Scaleform::GFx::AS3::ThunkFunc0<Scaleform::GFx::AS3::Instances::fl_display::Loader,2,Scaleform::GFx::AS3::Value const>::Method = Scaleform::GFx::AS3::Instances::fl_display::Loader::close;
  return result;
}

// File Line: 62
// RVA: 0x1595560
__int64 dynamic_initializer_for__Scaleform::GFx::AS3::ThunkFunc2_Scaleform::GFx::AS3::Instances::fl_display::Loader_3_Scaleform::GFx::AS3::Value_const__Scaleform::GFx::AS3::Instances::fl_net::URLRequest_____ptr64_Scaleform::GFx::AS3::Instances::fl_system::LoaderContext_____ptr64_::Method__()
{
  __int64 result; // rax
  __int64 v1; // [rsp+8h] [rbp-10h]

  LODWORD(v1) = 0;
  result = v1;
  qword_14243C100 = v1;
  Scaleform::GFx::AS3::ThunkFunc2<Scaleform::GFx::AS3::Instances::fl_display::Loader,3,Scaleform::GFx::AS3::Value const,Scaleform::GFx::AS3::Instances::fl_net::URLRequest *,Scaleform::GFx::AS3::Instances::fl_system::LoaderContext *>::Method = Scaleform::GFx::AS3::Instances::fl_display::Loader::load;
  return result;
}

// File Line: 63
// RVA: 0x1595590
__int64 dynamic_initializer_for__Scaleform::GFx::AS3::ThunkFunc2_Scaleform::GFx::AS3::Instances::fl_display::Loader_4_Scaleform::GFx::AS3::Value_const__Scaleform::GFx::AS3::Instances::fl_utils::ByteArray_____ptr64_Scaleform::GFx::AS3::Instances::fl_system::LoaderContext_____ptr64_::Method__()
{
  __int64 result; // rax
  __int64 v1; // [rsp+8h] [rbp-10h]

  LODWORD(v1) = 0;
  result = v1;
  qword_14243C110 = v1;
  Scaleform::GFx::AS3::ThunkFunc2<Scaleform::GFx::AS3::Instances::fl_display::Loader,4,Scaleform::GFx::AS3::Value const,Scaleform::GFx::AS3::Instances::fl_utils::ByteArray *,Scaleform::GFx::AS3::Instances::fl_system::LoaderContext *>::Method = Scaleform::GFx::AS3::Instances::fl_display::Loader::loadBytes;
  return result;
}

// File Line: 64
// RVA: 0x158B150
__int64 dynamic_initializer_for__Scaleform::GFx::AS3::ThunkFunc0_Scaleform::GFx::AS3::Instances::fl_display::Loader_5_Scaleform::GFx::AS3::Value_const__::Method__()
{
  __int64 result; // rax
  __int64 v1; // [rsp+8h] [rbp-10h]

  LODWORD(v1) = 0;
  result = v1;
  qword_14243C120 = v1;
  Scaleform::GFx::AS3::ThunkFunc0<Scaleform::GFx::AS3::Instances::fl_display::Loader,5,Scaleform::GFx::AS3::Value const>::Method = Scaleform::GFx::AS3::Instances::fl_display::Loader::unload;
  return result;
}

// File Line: 65
// RVA: 0x1591A20
__int64 dynamic_initializer_for__Scaleform::GFx::AS3::ThunkFunc1_Scaleform::GFx::AS3::Instances::fl_display::Loader_6_Scaleform::GFx::AS3::Value_const__bool_::Method__()
{
  __int64 result; // rax
  __int64 v1; // [rsp+8h] [rbp-10h]

  LODWORD(v1) = 0;
  result = v1;
  qword_14243C130 = v1;
  Scaleform::GFx::AS3::ThunkFunc1<Scaleform::GFx::AS3::Instances::fl_display::Loader,6,Scaleform::GFx::AS3::Value const,bool>::Method = Scaleform::GFx::AS3::Instances::fl_display::Loader::unloadAndStop;
  return result;
}

// File Line: 79
// RVA: 0x832140
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::contentGet(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this,
        Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl_display::DisplayObject> *result)
{
  Scaleform::GFx::AS3::Instances::fl_display::DisplayObject *pObject; // rcx
  unsigned int RefCount; // eax

  if ( LODWORD(this->pDispObj.pObject[1].pGeomData) )
  {
    Scaleform::GFx::AS3::Instances::fl_display::DisplayObjectContainer::getChildAt(this, result, 0);
  }
  else
  {
    pObject = result->pObject;
    if ( result->pObject )
    {
      if ( ((unsigned __int8)pObject & 1) != 0 )
      {
        result->pObject = (Scaleform::GFx::AS3::Instances::fl_display::DisplayObject *)((char *)pObject - 1);
        result->pObject = 0i64;
      }
      else
      {
        RefCount = pObject->RefCount;
        if ( (RefCount & 0x3FFFFF) != 0 )
        {
          pObject->RefCount = RefCount - 1;
          Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal(pObject);
        }
        result->pObject = 0i64;
      }
    }
  }
}

// File Line: 89
// RVA: 0x859B70
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::contentLoaderInfoGet(
        Scaleform::GFx::AS3::Instances::fl_net::URLRequest *this,
        Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl::Array> *result)
{
  Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl::Array> *p_Headers; // rdi
  Scaleform::GFx::AS3::Instances::fl::Array *pObject; // rcx
  unsigned int RefCount; // eax

  p_Headers = &this->Headers;
  if ( &this->Headers != result )
  {
    if ( p_Headers->pObject )
      p_Headers->pObject->RefCount = (p_Headers->pObject->RefCount + 1) & 0x8FBFFFFF;
    pObject = result->pObject;
    if ( result->pObject )
    {
      if ( ((unsigned __int8)pObject & 1) != 0 )
      {
        result->pObject = (Scaleform::GFx::AS3::Instances::fl::Array *)((char *)pObject - 1);
        result->pObject = p_Headers->pObject;
        return;
      }
      RefCount = pObject->RefCount;
      if ( (RefCount & 0x3FFFFF) != 0 )
      {
        pObject->RefCount = RefCount - 1;
        Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal(pObject);
      }
    }
    result->pObject = p_Headers->pObject;
  }
}

// File Line: 96
// RVA: 0x830CA0
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::close(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this,
        Scaleform::GFx::AS3::Value *result)
{
  Scaleform::GFx::AS3::VMVtbl *vfptr; // r8
  __int64 i; // rdx
  __int64 v4; // rax
  __int64 j; // rax

  vfptr = this->pTraits.pObject->pVM[1].vfptr;
  for ( i = *((_QWORD *)vfptr[2].__vecDelDtor + 2652); i; i = *(_QWORD *)(i + 8) )
  {
    v4 = *(_QWORD *)(i + 32);
    if ( *(Scaleform::GFx::AS3::Instances::fl_display::Loader **)(v4 + 40) == this )
      *(_BYTE *)(v4 + 37) = 1;
  }
  for ( j = *((_QWORD *)vfptr[2].__vecDelDtor + 4); j; j = *(_QWORD *)(j + 8) )
  {
    if ( *(Scaleform::GFx::AS3::Instances::fl_display::Loader **)(j + 40) == this )
      *(_BYTE *)(j + 37) = 1;
  }
}

// File Line: 106
// RVA: 0x8521C0
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::load(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this,
        Scaleform::GFx::AS3::Value *result,
        Scaleform::GFx::AS3::Instances::fl_net::URLRequest *request,
        Scaleform::GFx::AS3::Instances::fl_system::LoaderContext *context)
{
  Scaleform::GFx::AS3::VMVtbl *vfptr; // r12
  Scaleform::GFx::LoadQueueEntry::LoadMethod v7; // ebp
  Scaleform::GFx::AS3::Instances::fl_system::ApplicationDomain *pObject; // rbx
  Scaleform::GFx::AS3::Instances::fl_system::ApplicationDomain **p_resulta; // rdx
  char v10; // si
  Scaleform::GFx::ASStringNode *pNode; // rdi
  unsigned int Size; // eax
  unsigned int RefCount; // eax
  Scaleform::GFx::ASString *v14; // rax
  Scaleform::GFx::ASStringNode *v15; // rcx
  const char *pData; // rdx
  __int64 v17; // rcx
  char v18; // al
  __int64 v19; // rcx
  char v20; // al
  __int64 v21; // rcx
  char v22; // al
  __int64 v23; // rax
  char v24; // r8
  bool v25; // zf
  Scaleform::GFx::ASStringNode *v26; // rcx
  Scaleform::GFx::AS3::Instances::fl_system::ApplicationDomain *v27; // [rsp+28h] [rbp-40h] BYREF
  Scaleform::GFx::ASString v28; // [rsp+30h] [rbp-38h] BYREF
  __int64 v29; // [rsp+38h] [rbp-30h]
  Scaleform::GFx::ASString resulta; // [rsp+70h] [rbp+8h] BYREF

  v29 = -2i64;
  vfptr = this->pTraits.pObject->pVM[1].vfptr;
  v7 = LM_Get;
  if ( this->pContentLoaderInfo.pObject )
  {
    if ( context )
    {
      pObject = context->applicationDomain.pObject;
      v27 = pObject;
      if ( pObject )
        pObject->RefCount = (pObject->RefCount + 1) & 0x8FBFFFFF;
      p_resulta = &v27;
      v10 = 1;
      pNode = resulta.pNode;
    }
    else
    {
      pNode = 0i64;
      resulta.pNode = 0i64;
      p_resulta = (Scaleform::GFx::AS3::Instances::fl_system::ApplicationDomain **)&resulta;
      v10 = 2;
      pObject = v27;
    }
    Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo::SetAppDomain(this->pContentLoaderInfo.pObject, *p_resulta);
    if ( (v10 & 2) != 0 )
    {
      v10 &= ~2u;
      if ( pNode )
      {
        if ( ((unsigned __int8)pNode & 1) != 0 )
        {
          resulta.pNode = (Scaleform::GFx::ASStringNode *)((char *)pNode - 1);
        }
        else
        {
          Size = pNode->Size;
          if ( (Size & 0x3FFFFF) != 0 )
          {
            pNode->Size = Size - 1;
            Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal((Scaleform::GFx::AS3::RefCountBaseGC<328> *)pNode);
          }
        }
      }
    }
    if ( (v10 & 1) != 0 && pObject )
    {
      if ( ((unsigned __int8)pObject & 1) != 0 )
      {
        v27 = (Scaleform::GFx::AS3::Instances::fl_system::ApplicationDomain *)((char *)pObject - 1);
      }
      else
      {
        RefCount = pObject->RefCount;
        if ( (RefCount & 0x3FFFFF) != 0 )
        {
          pObject->RefCount = RefCount - 1;
          Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal(pObject);
        }
      }
    }
  }
  v14 = Scaleform::GFx::AS3::Instances::fl_net::URLRequest::methodGet(request, &resulta);
  Scaleform::GFx::ASString::ToUpper(v14, &v28);
  v15 = resulta.pNode;
  v25 = resulta.pNode->RefCount-- == 1;
  if ( v25 )
    Scaleform::GFx::ASStringNode::ReleaseNode(v15);
  pData = v28.pNode->pData;
  v17 = 0i64;
  while ( 1 )
  {
    v18 = pData[v17++];
    if ( v18 != httpMethod[v17 - 1] )
      break;
    if ( v17 == 4 )
      goto LABEL_39;
  }
  v19 = 0i64;
  while ( 1 )
  {
    v20 = pData[v19++];
    if ( v20 != aPost_0[v19 - 1] )
      break;
    if ( v19 == 5 )
    {
      v7 = LM_Post;
      goto LABEL_39;
    }
  }
  v21 = 0i64;
  while ( 1 )
  {
    v22 = pData[v21++];
    if ( v22 != aPut[v21 - 1] )
      break;
    if ( v21 == 4 )
    {
      v7 = LM_Put;
      goto LABEL_39;
    }
  }
  v23 = 0i64;
  while ( 1 )
  {
    v24 = pData[v23++];
    v25 = v24 == aDelete_0[v23 - 1];
    if ( v24 != aDelete_0[v23 - 1] )
      break;
    if ( v23 == 7 )
    {
      v25 = v24 == aDelete_0[6];
      break;
    }
  }
  v7 = LM_None;
  if ( v25 )
    v7 = LM_Delete;
LABEL_39:
  Scaleform::GFx::AS3::MovieRoot::AddNewLoadQueueEntry(
    (Scaleform::GFx::AS3::MovieRoot *)vfptr,
    (Scaleform::GFx::AS3::Instances::fl::XMLList *)request,
    (Scaleform::GFx::AS3::Instances::fl::XMLList *)this,
    v7);
  v26 = v28.pNode;
  v25 = v28.pNode->RefCount-- == 1;
  if ( v25 )
    Scaleform::GFx::ASStringNode::ReleaseNode(v26);
}

// File Line: 146
// RVA: 0x852760
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::loadBytes(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this,
        Scaleform::GFx::AS3::Value *result,
        Scaleform::GFx::AS3::Instances::fl_utils::ByteArray *bytes,
        Scaleform::GFx::AS3::Instances::fl_system::LoaderContext *context)
{
  Scaleform::GFx::AS3::RefCountBaseGC<328> *v6; // rdi
  Scaleform::GFx::AS3::VMVtbl *vfptr; // r15
  Scaleform::GFx::AS3::Instances::fl_system::ApplicationDomain *pObject; // rbx
  Scaleform::GFx::AS3::RefCountBaseGC<328> **v9; // rdx
  char v10; // si
  unsigned int RefCount; // eax
  unsigned int v12; // eax
  __int64 v13[6]; // [rsp+28h] [rbp-30h] BYREF
  Scaleform::GFx::AS3::RefCountBaseGC<328> *v14; // [rsp+60h] [rbp+8h] BYREF

  v13[1] = -2i64;
  v6 = 0i64;
  vfptr = this->pTraits.pObject->pVM[1].vfptr;
  if ( this->pContentLoaderInfo.pObject )
  {
    if ( context )
    {
      pObject = context->applicationDomain.pObject;
      v13[0] = (__int64)pObject;
      if ( pObject )
        pObject->RefCount = (pObject->RefCount + 1) & 0x8FBFFFFF;
      v9 = (Scaleform::GFx::AS3::RefCountBaseGC<328> **)v13;
      v10 = 1;
      v6 = v14;
    }
    else
    {
      v14 = 0i64;
      v9 = &v14;
      v10 = 2;
      pObject = (Scaleform::GFx::AS3::Instances::fl_system::ApplicationDomain *)v13[0];
    }
    Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo::SetAppDomain(
      this->pContentLoaderInfo.pObject,
      (Scaleform::GFx::AS3::Instances::fl_system::ApplicationDomain *)*v9);
    if ( (v10 & 2) != 0 )
    {
      v10 &= ~2u;
      if ( v6 )
      {
        if ( ((unsigned __int8)v6 & 1) != 0 )
        {
          v14 = (Scaleform::GFx::AS3::RefCountBaseGC<328> *)((char *)v6 - 1);
        }
        else
        {
          RefCount = v6->RefCount;
          if ( (RefCount & 0x3FFFFF) != 0 )
          {
            v6->RefCount = RefCount - 1;
            Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal(v6);
          }
        }
      }
    }
    if ( (v10 & 1) != 0 && pObject )
    {
      if ( ((unsigned __int8)pObject & 1) != 0 )
      {
        v13[0] = (__int64)&pObject[-1].VMDomain.pObject + 7;
      }
      else
      {
        v12 = pObject->RefCount;
        if ( (v12 & 0x3FFFFF) != 0 )
        {
          pObject->RefCount = v12 - 1;
          Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal(pObject);
        }
      }
    }
  }
  Scaleform::GFx::AS3::MovieRoot::AddNewLoadQueueEntry(
    (Scaleform::GFx::AS3::MovieRoot *)vfptr,
    bytes,
    (Scaleform::GFx::AS3::Instances::fl::XMLList *)this,
    LM_None);
}

// File Line: 165
// RVA: 0x86B380
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::unload(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this,
        Scaleform::GFx::AS3::Value *result)
{
  Scaleform::GFx::AS3::MovieRoot::UnloadMovie(
    (Scaleform::GFx::AS3::MovieRoot *)this->pTraits.pObject->pVM[1].vfptr,
    this,
    0,
    0);
}

// File Line: 175
// RVA: 0x86B3A0
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::unloadAndStop(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this,
        Scaleform::GFx::AS3::Value *result,
        bool gc)
{
  Scaleform::GFx::AS3::MovieRoot::UnloadMovie(
    (Scaleform::GFx::AS3::MovieRoot *)this->pTraits.pObject->pVM[1].vfptr,
    this,
    1,
    gc);
}

// File Line: 209
// RVA: 0x78C540
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::~Loader(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this)
{
  Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo *pObject; // rcx
  unsigned int RefCount; // eax
  Scaleform::GFx::AS3::Instances::fl::Object *v4; // rcx
  unsigned int v5; // eax

  this->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::Instances::fl_display::Loader::`vftable;
  pObject = this->pContentLoaderInfo.pObject;
  if ( pObject )
  {
    if ( ((unsigned __int8)pObject & 1) != 0 )
    {
      this->pContentLoaderInfo.pObject = (Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo *)((char *)pObject - 1);
    }
    else
    {
      RefCount = pObject->RefCount;
      if ( (RefCount & 0x3FFFFF) != 0 )
      {
        pObject->RefCount = RefCount - 1;
        Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal(pObject);
      }
    }
  }
  this->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::Instances::fl_display::DisplayObjectContainer::`vftable;
  this->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::Instances::fl_display::InteractiveObject::`vftable;
  v4 = this->pContextMenu.pObject;
  if ( v4 )
  {
    if ( ((unsigned __int8)v4 & 1) != 0 )
    {
      this->pContextMenu.pObject = (Scaleform::GFx::AS3::Instances::fl::Object *)((char *)v4 - 1);
    }
    else
    {
      v5 = v4->RefCount;
      if ( (v5 & 0x3FFFFF) != 0 )
      {
        v4->RefCount = v5 - 1;
        Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal(v4);
      }
    }
  }
  Scaleform::GFx::AS3::Instances::fl_display::DisplayObject::~DisplayObject(this);
}

// File Line: 213
// RVA: 0x7D5E20
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::ForEachChild_GC(
        Scaleform::GFx::AS3::Instances::fl_display::Sprite *this,
        Scaleform::GFx::AS3::RefCountCollector<328> *prcc,
        void (__fastcall *op)(Scaleform::GFx::AS3::RefCountCollector<328> *, Scaleform::GFx::AS3::RefCountBaseGC<328> **))
{
  Scaleform::GFx::AS3::Instances::fl_display::DisplayObjectContainer::ForEachChild_GC(this, prcc, op);
  if ( this->pGraphics.pObject )
    op(prcc, &this->pGraphics.pObject);
}

// File Line: 219
// RVA: 0x7F2D20
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::InitInstance(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this,
        bool extCall)
{
  Scaleform::GFx::AS3::ASVM *pVM; // rbp
  Scaleform::GFx::AS3::Class *Class; // rax
  Scaleform::GFx::AS3::Class *v5; // rdi
  unsigned int RefCount; // eax
  Scaleform::GFx::DisplayObject *pObject; // rcx
  char *v8; // rdx
  __int64 v9; // rax
  Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl::XMLList> *v10; // rcx
  Scaleform::StringDataPtr v11; // [rsp+38h] [rbp-20h] BYREF

  pVM = (Scaleform::GFx::AS3::ASVM *)this->pTraits.pObject->pVM;
  if ( extCall )
  {
    pObject = this->pDispObj.pObject;
    if ( pObject )
    {
      v8 = (char *)pObject + 4 * (unsigned __int8)pObject->AvmObjOffset;
      v9 = *((_QWORD *)v8 + 2);
      if ( !v9 )
        v9 = *((_QWORD *)v8 + 1);
      if ( (v9 & 1) != 0 )
        --v9;
      if ( v9 )
      {
        v10 = *(Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl::XMLList> **)(v9 + 80);
        if ( v10 )
          Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl_geom::Vector3D>::SetPtr(
            v10 + 12,
            (Scaleform::GFx::AS3::Instances::fl::XMLList *)this);
      }
    }
  }
  else
  {
    v11.pStr = "flash.display.LoaderInfo";
    v11.Size = 24i64;
    Class = Scaleform::GFx::AS3::VM::GetClass(pVM, &v11, pVM->CurrentDomain.pObject);
    v5 = Class;
    if ( Class )
      Class->RefCount = (Class->RefCount + 1) & 0x8FBFFFFF;
    Scaleform::GFx::AS3::ASVM::_constructInstance(
      pVM,
      (Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Object> *)&this->pContentLoaderInfo,
      Class,
      0,
      0i64);
    Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl_geom::Vector3D>::SetPtr(
      (Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl::XMLList> *)&this->pContentLoaderInfo.pObject->pLoader,
      (Scaleform::GFx::AS3::Instances::fl::XMLList *)this);
    Scaleform::GFx::AS3::Instances::fl_display::Loader::CreateStageObject(this);
    if ( v5 && ((unsigned __int8)v5 & 1) == 0 )
    {
      RefCount = v5->RefCount;
      if ( (RefCount & 0x3FFFFF) != 0 )
      {
        v5->RefCount = RefCount - 1;
        Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal(v5);
      }
    }
  }
}

// File Line: 253
// RVA: 0x7BEDA0
Scaleform::GFx::DisplayObject *__fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::CreateStageObject(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this)
{
  Scaleform::GFx::AS3::MovieRoot *vfptr; // rbp
  Scaleform::GFx::AS3::AvmLoader *v3; // rax
  __int64 v4; // rax
  __int64 v5; // rdi
  Scaleform::GFx::DisplayObject *pObject; // rcx
  Scaleform::GFx::AS3::RefCountBaseGC<328> *v7; // rcx
  unsigned int RefCount; // eax
  Scaleform::GFx::AS3::Traits *v9; // rsi
  __int64 v10; // rax
  Scaleform::GFx::AS3::VMAppDomain *v11; // rax
  Scaleform::GFx::ResourceId id; // [rsp+60h] [rbp+8h] BYREF
  Scaleform::MemoryHeap *pHeap; // [rsp+68h] [rbp+10h]
  Scaleform::GFx::AS3::AvmLoader *v15; // [rsp+70h] [rbp+18h]

  if ( this->pDispObj.pObject )
    return this->pDispObj.pObject;
  vfptr = (Scaleform::GFx::AS3::MovieRoot *)this->pTraits.pObject->pVM[1].vfptr;
  pHeap = vfptr->pMovieImpl->pHeap;
  v3 = (Scaleform::GFx::AS3::AvmLoader *)pHeap->vfptr->Alloc((Scaleform::MemoryHeap *)this, 352ui64, 0i64);
  v15 = v3;
  if ( v3 )
  {
    id.Id = 0x40000;
    Scaleform::GFx::AS3::AvmLoader::AvmLoader(
      v3,
      vfptr,
      vfptr->pMovieImpl->pMainMovieDef.pObject,
      0i64,
      (Scaleform::GFx::AS3::AvmDisplayObjContainer *)&id);
    v5 = v4;
  }
  else
  {
    v5 = 0i64;
  }
  pObject = this->pDispObj.pObject;
  if ( pObject )
    Scaleform::RefCountNTSImpl::Release(pObject);
  this->pDispObj.pObject = (Scaleform::GFx::DisplayObject *)v5;
  if ( v5 )
    v5 += 4i64 * *(unsigned __int8 *)(v5 + 109);
  *(_QWORD *)(v5 + 16) = this;
  v7 = *(Scaleform::GFx::AS3::RefCountBaseGC<328> **)(v5 + 8);
  if ( v7 )
  {
    if ( ((unsigned __int8)v7 & 1) != 0 )
    {
      *(_QWORD *)(v5 + 8) = (char *)v7 - 1;
    }
    else
    {
      RefCount = v7->RefCount;
      if ( (RefCount & 0x3FFFFF) != 0 )
      {
        v7->RefCount = RefCount - 1;
        Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal(v7);
      }
    }
    *(_QWORD *)(v5 + 8) = 0i64;
  }
  v9 = this->pTraits.pObject;
  v10 = ((__int64 (__fastcall *)(Scaleform::GFx::AS3::Traits *))v9->vfptr[2].~RefCountBaseGC<328>)(v9);
  if ( v10 )
    v11 = *(Scaleform::GFx::AS3::VMAppDomain **)(v10 + 48);
  else
    v11 = v9->pVM->SystemDomain.pObject;
  if ( Scaleform::GFx::AS3::VMAppDomain::Enabled )
    *(_QWORD *)(v5 + 40) = v11;
  Scaleform::GFx::AS3::MovieRoot::AddScriptableMovieClip(
    vfptr,
    (Scaleform::GFx::DisplayObjContainer *)this->pDispObj.pObject);
  return this->pDispObj.pObject;
}

// File Line: 287
// RVA: 0x7CE730
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::ExecuteCompleteEventCFunc(
        Scaleform::GFx::AS3::MovieRoot::ActionEntry *ae)
{
  Scaleform::GFx::AS3::RefCountCollector<328> *pRCC; // rcx

  pRCC = ae->pAS3Obj.pObject[1]._pRCC;
  if ( pRCC )
    Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo::ExecuteCompleteEvent((Scaleform::GFx::AS3::Instances::fl_net::URLLoader *)pRCC);
}

// File Line: 294
// RVA: 0x80B650
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::QueueCompleteEvent(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this)
{
  Scaleform::GFx::AS3::MovieRoot::ActionEntry *inserted; // rax
  Scaleform::GFx::AS3::MovieRoot::ActionEntry *v3; // rdi
  Scaleform::GFx::DisplayObject *pObject; // rsi
  Scaleform::RefCountNTSImpl *v5; // rcx
  Scaleform::GFx::AS3::WeakProxy *pWeakProxy; // rdx
  Scaleform::Render::RenderBuffer *v8; // rcx

  if ( this->pContentLoaderInfo.pObject )
  {
    inserted = Scaleform::GFx::AS3::MovieRoot::InsertEmptyAction(
                 (Scaleform::GFx::AS3::MovieRoot *)this->pTraits.pObject->pVM[1].vfptr,
                 AL_Count_);
    v3 = inserted;
    if ( inserted )
    {
      pObject = this->pDispObj.pObject;
      inserted->Type = Entry_Function;
      if ( pObject )
        ++pObject->RefCount;
      v5 = inserted->pCharacter.pObject;
      if ( v5 )
        Scaleform::RefCountNTSImpl::Release(v5);
      v3->pCharacter.pObject = pObject;
      Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl_geom::Vector3D>::SetPtr(
        (Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl::XMLList> *)&v3->pAS3Obj,
        (Scaleform::GFx::AS3::Instances::fl::XMLList *)this);
      v3->CFunction = Scaleform::GFx::AS3::Instances::fl_display::ExecuteCompleteEventCFunc;
      if ( (v3->Function.Flags & 0x1F) > 9 )
      {
        if ( (v3->Function.Flags & 0x200) != 0 )
        {
          pWeakProxy = v3->Function.Bonus.pWeakProxy;
          if ( pWeakProxy->RefCount-- == 1 )
            ((void (__fastcall *)(Scaleform::MemoryHeap *))Scaleform::Memory::pGlobalHeap->vfptr->Free)(Scaleform::Memory::pGlobalHeap);
          v3->Function.Flags &= 0xFFFFFDE0;
          v3->Function.Bonus.pWeakProxy = 0i64;
          v3->Function.value.VS._1.VStr = 0i64;
          v3->Function.value.VS._2.VObj = 0i64;
        }
        else
        {
          Scaleform::GFx::AS3::Value::ReleaseInternal(&v3->Function);
        }
      }
      v3->Function.Flags &= 0xFFFFFFE0;
      v8 = (Scaleform::Render::RenderBuffer *)v3->pNLoadInitCL.pObject;
      if ( v8 )
        Scaleform::RefCountImpl::Release(v8);
      v3->pNLoadInitCL.pObject = 0i64;
    }
  }
}

// File Line: 307
// RVA: 0x7CF400
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::ExecuteInitEventCFunc(
        Scaleform::GFx::AS3::MovieRoot::ActionEntry *ae)
{
  Scaleform::GFx::AS3::RefCountCollector<328> *pRCC; // rcx
  Scaleform::GFx::AS3::NotifyLoadInitC *pObject; // rcx

  pRCC = ae->pAS3Obj.pObject[1]._pRCC;
  if ( pRCC )
    Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo::ExecuteInitEvent(
      (Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo *)pRCC,
      ae->pCharacter.pObject);
  pObject = ae->pNLoadInitCL.pObject;
  if ( pObject )
    ((void (__fastcall *)(Scaleform::GFx::AS3::NotifyLoadInitC *))pObject->vfptr[2].__vecDelDtor)(pObject);
}

// File Line: 315
// RVA: 0x80BBF0
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::QueueInitEvent(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this,
        Scaleform::GFx::DisplayObject *obj,
        Scaleform::Ptr<Scaleform::GFx::AS3::NotifyLoadInitC> pnLoadInitCL)
{
  Scaleform::GFx::AS3::MovieRoot::ActionEntry *inserted; // rax
  Scaleform::GFx::AS3::MovieRoot::ActionEntry *v7; // rbx
  Scaleform::GFx::DisplayObject *pObject; // rdi
  Scaleform::RefCountNTSImpl *v9; // rcx
  Scaleform::GFx::AS3::WeakProxy *pWeakProxy; // rdx
  Scaleform::Render::RenderBuffer *v12; // rcx
  Scaleform::RefCountNTSImpl *v13; // rcx
  Scaleform::Render::RenderBuffer *v14; // rcx

  if ( this->pContentLoaderInfo.pObject )
  {
    inserted = Scaleform::GFx::AS3::MovieRoot::InsertEmptyAction(
                 (Scaleform::GFx::AS3::MovieRoot *)this->pTraits.pObject->pVM[1].vfptr,
                 AL_Count_);
    v7 = inserted;
    if ( inserted )
    {
      pObject = this->pDispObj.pObject;
      inserted->Type = Entry_Function;
      if ( pObject )
        ++pObject->RefCount;
      v9 = inserted->pCharacter.pObject;
      if ( v9 )
        Scaleform::RefCountNTSImpl::Release(v9);
      v7->pCharacter.pObject = pObject;
      Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl_geom::Vector3D>::SetPtr(
        (Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl::XMLList> *)&v7->pAS3Obj,
        (Scaleform::GFx::AS3::Instances::fl::XMLList *)this);
      v7->CFunction = Scaleform::GFx::AS3::Instances::fl_display::ExecuteInitEventCFunc;
      if ( (v7->Function.Flags & 0x1F) > 9 )
      {
        if ( (v7->Function.Flags & 0x200) != 0 )
        {
          pWeakProxy = v7->Function.Bonus.pWeakProxy;
          if ( pWeakProxy->RefCount-- == 1 )
            ((void (__fastcall *)(Scaleform::MemoryHeap *))Scaleform::Memory::pGlobalHeap->vfptr->Free)(Scaleform::Memory::pGlobalHeap);
          v7->Function.Bonus.pWeakProxy = 0i64;
          v7->Function.value.VS._1.VStr = 0i64;
          v7->Function.value.VS._2.VObj = 0i64;
          v7->Function.Flags &= 0xFFFFFDE0;
        }
        else
        {
          Scaleform::GFx::AS3::Value::ReleaseInternal(&v7->Function);
        }
      }
      v7->Function.Flags &= 0xFFFFFFE0;
      v12 = (Scaleform::Render::RenderBuffer *)v7->pNLoadInitCL.pObject;
      if ( v12 )
        Scaleform::RefCountImpl::Release(v12);
      v7->pNLoadInitCL.pObject = 0i64;
      if ( obj )
        ++obj->RefCount;
      v13 = v7->pCharacter.pObject;
      if ( v13 )
        Scaleform::RefCountNTSImpl::Release(v13);
      v7->pCharacter.pObject = obj;
      if ( pnLoadInitCL.pObject->vfptr )
        Scaleform::Render::RenderBuffer::AddRef((Scaleform::GFx::Resource *)pnLoadInitCL.pObject->vfptr);
      v14 = (Scaleform::Render::RenderBuffer *)v7->pNLoadInitCL.pObject;
      if ( v14 )
        Scaleform::RefCountImpl::Release(v14);
      v7->pNLoadInitCL.pObject = (Scaleform::GFx::AS3::NotifyLoadInitC *)pnLoadInitCL.pObject->vfptr;
    }
  }
  if ( pnLoadInitCL.pObject->vfptr )
    Scaleform::RefCountImpl::Release((Scaleform::Render::RenderBuffer *)pnLoadInitCL.pObject->vfptr);
}

// File Line: 334
// RVA: 0x7CE750
void __fastcall Scaleform::GFx::AS3::Instances::fl_display::Loader::ExecuteErrorEvent(
        Scaleform::GFx::AS3::Instances::fl_display::Loader *this,
        const char *url)
{
  Scaleform::GFx::AS3::Instances::fl_display::LoaderInfo *pObject; // rbx
  Scaleform::GFx::AS3::Instances::fl_events::IOErrorEvent *v4; // rcx
  unsigned int RefCount; // eax
  char dest[1032]; // [rsp+30h] [rbp-408h] BYREF
  Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl_events::IOErrorEvent> result; // [rsp+440h] [rbp+8h] BYREF

  if ( this->pContentLoaderInfo.pObject )
  {
    Scaleform::SFsprintf(dest, 0x400ui64, "Error reading %s", url);
    pObject = this->pContentLoaderInfo.pObject;
    Scaleform::GFx::AS3::Instances::fl_events::EventDispatcher::CreateIOErrorEventObject(
      pObject,
      (Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Object> *)&result,
      dest);
    Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl_geom::Vector3D>::SetPtr(
      (Scaleform::GFx::AS3::SPtr<Scaleform::GFx::AS3::Instances::fl::XMLList> *)&result.pObject->Target,
      (Scaleform::GFx::AS3::Instances::fl::XMLList *)pObject);
    Scaleform::GFx::AS3::Instances::fl_events::EventDispatcher::DispatchSingleEvent(pObject, result.pObject, 0);
    v4 = result.pObject;
    if ( result.pObject )
    {
      if ( ((__int64)result.pObject & 1) != 0 )
      {
        --result.pObject;
      }
      else
      {
        RefCount = result.pObject->RefCount;
        if ( (RefCount & 0x3FFFFF) != 0 )
        {
          result.pObject->RefCount = RefCount - 1;
          Scaleform::GFx::AS3::RefCountBaseGC<328>::ReleaseInternal(v4);
        }
      }
    }
  }
}

// File Line: 397
// RVA: 0x7FFAF0
void __fastcall Scaleform::GFx::AS3::InstanceTraits::fl_display::Loader::MakeObject(
        Scaleform::GFx::AS3::InstanceTraits::fl_display::Loader *this,
        Scaleform::GFx::AS3::Value *result,
        Scaleform::GFx::AS3::InstanceTraits::fl_display::Loader *t)
{
  Scaleform::Pickable<Scaleform::GFx::AS3::Instances::fl_display::Loader> *Instance; // rax
  Scaleform::Pickable<Scaleform::GFx::AS3::Instances::fl_display::Loader> resulta; // [rsp+48h] [rbp+20h] BYREF

  Instance = Scaleform::GFx::AS3::InstanceTraits::fl_display::Loader::MakeInstance(&resulta, t);
  Scaleform::GFx::AS3::Value::Pick(result, Instance->pV);
}

// File Line: 420
// RVA: 0x75D990
Scaleform::Pickable<Scaleform::GFx::AS3::ClassTraits::Traits> *__fastcall Scaleform::GFx::AS3::ClassTraits::fl_display::Loader::MakeClassTraits(
        Scaleform::Pickable<Scaleform::GFx::AS3::ClassTraits::Traits> *result,
        Scaleform::GFx::AS3::VM *vm)
{
  Scaleform::MemoryHeap *MHeap; // rsi
  Scaleform::GFx::AS3::ClassTraits::Traits *v5; // rax
  Scaleform::GFx::AS3::ClassTraits::Traits *v6; // rbx
  Scaleform::GFx::AS3::InstanceTraits::CTraits *v7; // rax
  Scaleform::Pickable<Scaleform::GFx::AS3::InstanceTraits::Traits> v8; // rbx
  Scaleform::GFx::AS3::Class *v9; // rax

  MHeap = vm->MHeap;
  v5 = (Scaleform::GFx::AS3::ClassTraits::Traits *)MHeap->vfptr->Alloc(MHeap, 208ui64, 0i64);
  v6 = v5;
  if ( v5 )
  {
    Scaleform::GFx::AS3::ClassTraits::Traits::Traits(v5, vm, &Scaleform::GFx::AS3::fl_display::LoaderCI);
    v6->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::ClassTraits::fl::Object::`vftable;
    v6->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::ClassTraits::fl_events::EventDispatcher::`vftable;
    v6->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::ClassTraits::fl_display::DisplayObject::`vftable;
    v6->TraitsType = Traits_DisplayObject_Begin;
    v6->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::ClassTraits::fl_display::InteractiveObject::`vftable;
    v6->TraitsType = Traits_InteractiveObject;
    v6->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::ClassTraits::fl_display::DisplayObjectContainer::`vftable;
    v6->TraitsType = Traits_DisplayObjectContainer;
    v6->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::ClassTraits::fl_display::Loader::`vftable;
    v6->TraitsType = Traits_Loader;
  }
  else
  {
    v6 = 0i64;
  }
  result->pV = v6;
  v7 = (Scaleform::GFx::AS3::InstanceTraits::CTraits *)MHeap->vfptr->Alloc(MHeap, 240ui64, 0i64);
  v8.pV = v7;
  if ( v7 )
  {
    Scaleform::GFx::AS3::InstanceTraits::CTraits::CTraits(v7, vm, &Scaleform::GFx::AS3::fl_display::LoaderCI);
    v8.pV->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::InstanceTraits::fl::Object::`vftable;
    v8.pV->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::InstanceTraits::fl_events::EventDispatcher::`vftable;
    v8.pV->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::InstanceTraits::fl_display::DisplayObject::`vftable;
    v8.pV->TraitsType = Traits_DisplayObject_Begin;
    v8.pV->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::InstanceTraits::fl_display::InteractiveObject::`vftable;
    v8.pV->TraitsType = Traits_InteractiveObject;
    v8.pV->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::InstanceTraits::fl_display::DisplayObjectContainer::`vftable;
    v8.pV->TraitsType = Traits_DisplayObjectContainer;
    v8.pV->vfptr = (Scaleform::GFx::AS3::RefCountBaseGC<328>Vtbl *)&Scaleform::GFx::AS3::InstanceTraits::fl_display::Loader::`vftable;
    v8.pV->TraitsType = Traits_Loader;
  }
  else
  {
    v8.pV = 0i64;
  }
  Scaleform::GFx::AS3::ClassTraits::Traits::SetInstanceTraits(result->pV, v8);
  v9 = (Scaleform::GFx::AS3::Class *)((__int64 (__fastcall *)(Scaleform::MemoryHeap *, __int64))MHeap->vfptr->Alloc)(
                                       MHeap,
                                       72i64);
  if ( v9 )
    Scaleform::GFx::AS3::Class::Class(v9, result->pV);
  return result;
}

